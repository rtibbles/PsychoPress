{"version":3,"file":"public/js/app.js","sources":["app/app/app.coffee","app/initialize.coffee","app/models/APIBase.coffee","app/models/Base.coffee","app/models/Block.coffee","app/models/BlockDataHandler.coffee","app/models/BlockParameterSet.coffee","app/models/Experiment.coffee","app/models/ExperimentDataHandler.coffee","app/models/NestedAPIBase.coffee","app/models/Parameter.coffee","app/models/Trial.coffee","app/models/TrialDataLog.coffee","app/models/TrialEventLog.coffee","app/models/TrialObject.coffee","app/models/TrialObjects/AudioTrialObject.coffee","app/models/TrialObjects/GroupTrialObject.coffee","app/models/TrialObjects/KeyboardTrialObject.coffee","app/models/TrialObjects/Visual/CircleVisualTrialObject.coffee","app/models/TrialObjects/Visual/EllipseVisualTrialObject.coffee","app/models/TrialObjects/Visual/ImageVisualTrialObject.coffee","app/models/TrialObjects/Visual/PolygonVisualTrialObject.coffee","app/models/TrialObjects/Visual/RectangleVisualTrialObject.coffee","app/models/TrialObjects/Visual/Text/MultiLineTextVisualTrialObject.coffee","app/models/TrialObjects/Visual/TextVisualTrialObject.coffee","app/models/TrialObjects/Visual/TriangleVisualTrialObject.coffee","app/models/TrialObjects/VisualTrialObject.coffee","app/routes/router.coffee","app/templates/application.hbs","app/templates/experiment.hbs","app/templates/home.hbs","app/templates/progressbar.hbs","app/templates/trial.hbs","app/utils/clock.coffee","app/utils/diff.coffee","app/utils/fingerprint.coffee","app/utils/keys.coffee","app/utils/nestedImport.coffee","app/utils/nestedModules.coffee","app/utils/nestedSelectiveImport.coffee","app/utils/random.coffee","app/utils/stringHash.coffee","app/views/BlockView.coffee","app/views/ExperimentView.coffee","app/views/HomeView.coffee","app/views/ProgressBarView.coffee","app/views/TrialObjectView.coffee","app/views/TrialObjectViews/AudioTrialObjectView.coffee","app/views/TrialObjectViews/GroupTrialObjectView.coffee","app/views/TrialObjectViews/KeyboardTrialObjectView.coffee","app/views/TrialObjectViews/Visual/CircleVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/EllipseVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/ImageVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/PolygonVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/RectangleVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/TextVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/TriangleVisualTrialObjectView.coffee","app/views/TrialObjectViews/VisualTrialObjectView.coffee","app/views/TrialView.coffee","app/views/View.coffee","envs/development/env.js"],"names":[],"mappings":"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Df,EAkEe,UAAf;CACI;GAAa,CAAb;CACA;;;CACI,GAAG,EAAH;CACI,EAA6B,CAAlB,IAAX,CAAoB,CAAT;OAFnB;KADA;CAIA,UAAO;CAvEX,EAkEe;;CAlEf;;CADgB,UAAW;;AA0E/B,CA9EA,EA+EI,GADE,CAAN;CACI;CA/EJ;A;;;ACAA;;;;GAAW,KAAX,WAAW;;AACX,CADA,EACiB,WAAjB,WAAiB;;AAEjB,CAHA,EAGuB,GAAjB,CAAN;CACI;;;;;;;GACI,GADJ;CACI;CADJ;;GAGM,CAAN,KAAM;CAEF,UAAO;CALX,EAGM;;CAHN,EAOU,KAAV,CAAW;CACP;CACI,GAAG,CAAH;CAAoB,GAAC,CAAD;MAApB;CAAuC,GAAC,EAAD;OAD3C;;GAEQ,CAAR;CAFA,GAGA;CACC,KAAD;CAZJ,EAOU;;CAPV;;CADkC,OAAQ;A;;CCH9C;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;;A;ACEA;;;;GAAqB,CAAsB,EAArC,KAAN;;AAEA,CAFA,EAGO,CADP,CACO,EAAH,IADO;;AAUX,CAZA,EAYA,CAEQ,CADA,MADG;CAMA,GAAW;CAAd;;AAIR,CAtBA,EAsBe,GAAM,IAtBrB,EAsBA;;AACA,CAvBA,EAuBe,GAAM,KAvBrB,CAuB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","sourcesContent":["'use strict'\n\n# The application bootstrapper.\nPsychoCoffee =\n    initialize: ->\n        Router = require '../routes/router'\n\n        # Instantiate the router\n        @router = new Router()\n        # Freeze the object\n        Object.freeze? this\n\nmodule.exports = PsychoCoffee","'use strict'\nPsychoCoffee = window.PsychoCoffee = require './app/app'\nnestedImport = require './utils/nestedImport'\nnestedSelectiveImport = require '../utils/nestedSelectiveImport'\ncreatejs.FlashPlugin.swfPath = \"/widgets/SoundJS/\"\ncreatejs.Sound.registerPlugins [\n    createjs.WebAudioPlugin\n    createjs.HTMLAudioPlugin\n    createjs.FlashPlugin\n    ]\n\n# Load all modules in order automagically.\nfolderOrder = [\n    'utils', 'routes', 'models',\n    'views', 'templates'\n  ]\n\nfolderOrder.forEach (folder) -> nestedImport folder, PsychoCoffee\n\n# A convenience method for specifying the 'type' of\n# a trial object by a short hand type.\nPsychoCoffee.trialObjectTypeKeys =\n    _.invert nestedSelectiveImport('models/TrialObjects', \"Type\")\n\n$ ->\n    PsychoCoffee.initialize()\n    Backbone.history.start()","'use strict'\n\nBase = require('./Base')\n\nclass Model extends Base.Model\n\n\nclass Collection extends Base.Collection\n    # Overwrite base model non-syncing behaviour\n    urlBase: \"/api/\"\n    local: false\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nclass Model extends Backbone.AssociatedModel\n    name: ->\n        @get(\"name\") or @id\n\nclass Collection extends Backbone.Collection\n    url: \"none\"\n    local: true\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require './Base'\nTrial = require './Trial'\nTrialObject = require './TrialObject'\nBlockParameterSet = require './BlockParameterSet'\n\nclass Model extends Base.Model\n    defaults:\n        trials: []\n        title: \"\"\n        width: 640\n        height: 480\n        timeout: 1000\n        parameterSet: {}\n        trialObjects: []\n\n    trialProperties: [\n        \"title\"\n        \"width\"\n        \"height\"\n        \"timeout\"\n        \"triggers\"\n    ]\n\n    relations: [\n        type: Backbone.Many\n        key: 'trials'\n        collectionType: Trial.Collection\n    ,\n        type: Backbone.Many\n        key: 'trialObjects'\n        collectionType: TrialObject.Collection\n    ,\n        type: Backbone.One\n        key: 'parameterSet'\n        relatedModel: BlockParameterSet.Model\n    ]\n\n    returnParameters: ->\n        @get(\"parameterSet\").returnTrialParameters @get(\"numberOfTrials\")\n\n    returnTrialProperties: (clone=false) ->\n        attributes = {}\n        for key in @trialProperties\n            attributes[key] = @get(key)\n        if clone then attributes[\"trialObjects\"] = @get \"trialObjects\"\n        return attributes\n\n    createTrialObject: (options) ->\n        @get(\"trialObjects\").create(options)\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\nTrialDataLog = require('./TrialDataLog')\n\nclass Model extends NestedAPIBase.Model\n\n    defaults:\n        trialdatalogs: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialdatalogs'\n        collectionType: TrialDataLog.Collection\n    ]\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nBase = require('./Base')\nRandom = require 'utils/random'\nParameter = require './Parameter'\n\nclass Model extends Base.Model\n\n    defaults:\n        randomized: false\n        trialParameters: []\n        blockParameters: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialParameters'\n        collectionType: Parameter.Collection\n    ,\n        type: Backbone.Many\n        key: 'blockParameters'\n        collectionType: Parameter.Collection\n    ]\n\n    returnTrialParameters: (trials_wanted=null, experimentParameterSet={}) ->\n        parameterObjectList = []\n        parameterNameList = []\n        blockParameterSet = {}\n        \n        # Collect block parameters to inject into trialParameters at generation\n        for model in @get(\"blockParameters\").models\n            # Block Parameters are intended to be constant across a block\n            # Block Parameters are always randomized.\n            blockParameterSet[model.get(\"parameterName\")] =\n                Random.seeded_shuffle(\n                    model.returnParameterList(null, experimentParameterSet)\n                    \"TODO - insert a reference to participant ID here!\")[0]\n\n        # Collect trial parameters\n        parameterSet = {}\n        for model in @get(\"trialParameters\").models\n            parameterList = model.returnParameterList(\n                trials_wanted\n                blockParameterSet)\n            parameterSet[model.get(\"parameterName\")] = parameterList\n            min_length = Math.min(min_length, parameterList.length) or\n                parameterList.length\n\n        # Do some checking to make sure that the resultant trial lists are of\n        # equal length. If not, play it safe and reduce them all to the\n        # shortest one to allow the trials to go ahead. Warn of the issue.\n        for key, value of parameterSet\n            if value.length < trials_wanted\n                console.warn    \"\"\"\n                                Parameter #{key} could not produce sufficient\n                                trials for desired trials_wanted value.\n                                \"\"\"\n            parameterSet[key] = value[0...min_length]\n            parameterNameList.push key\n\n        # Now that we have a set length for trials, generate lists of experiment\n        # parameters to allow them to be passed in with the trial parameters.\n        for key, value of experimentParameterSet\n            parameterList = []\n            for i in [0...min_length]\n                parameterList.push value\n            parameterSet[key] = parameterList\n            parameterNameList.push key\n\n        # Now that we have a set length for trials, generate lists of block\n        # parameters to allow them to be passed in with the trial parameters.\n        for key, value of blockParameterSet\n            parameterList = []\n            for i in [0...min_length]\n                parameterList.push value\n            parameterSet[key] = parameterList\n            parameterNameList.push key\n\n        for i in [0...min_length]\n            parameters =\n                _.object parameterNameList,\n                    (parameterSet[parameter][i] \\\n                        for parameter in parameterNameList)\n            parameterObjectList.push parameters\n        if @get \"randomized\"\n            parameterObjectList = Random.seeded_shuffle parameterSet,\n                \"TODO - insert a reference to participant ID here!\"\n        return [min_length, parameterObjectList]\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require('./Base')\nBlock = require('./Block')\n\nclass Model extends Base.Model\n    defaults:\n        blocks: []\n        title: \"Experiment\"\n        # This attribute determines the time intervals between\n        # saves to the API for experimental data.\n        # Larger save intervals will give better performance,\n        # But increase risk of data loss.\n        saveInterval: 10000\n\n    relations: [\n        type: Backbone.Many\n        key: 'blocks'\n        collectionType: Block.Collection\n    ]\n\n    createBlock: (options) ->\n        @.get(\"blocks\").create(options)\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nAPIBase = require './APIBase'\nBlockDataHandler = require './BlockDataHandler'\nDiff = require 'utils/diff'\n\nclass Model extends APIBase.Model\n\n    initialize: ->\n        @lastSync = 0\n        @serverState = @toJSON()\n\n    defaults:\n        blockdatahandlers: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'blockdatahandlers'\n        collectionType: BlockDataHandler.Collection\n    ]\n\n    sync: (method, model, options) =>\n        syncNow = => @syncNow(method,model,options)\n        delayTime = @lastSync + @get(\"saveInterval\") - performance.now()\n        if delayTime <= 0\n            @syncNow()\n        else\n            if not @syncCache\n                @syncCache = setTimeout syncNow, delayTime\n\n    syncNow: (method, model, options) =>\n        if not @isNew()\n            options.attrs = Diff.Diff(@serverState, model.toJSON())\n            options.method = 'patch'\n            options.success = (saved) =>\n                if saved\n                    @serverState = @toJSON()\n        else\n            options.success = (data) =>\n                @set(data)\n                @serverState = @toJSON()\n        @lastSync = performance.now()\n        clearTimeout(@syncCache)\n        delete @syncCache\n        try\n            Backbone.sync(method, model, options)\n        catch e\n            console.debug e, method, model, options\n        \n\nclass Collection extends APIBase.Collection\n    model: Model\n    url: =>\n        @urlBase + \"experimentdatahandlers\"\n\n    getOrCreateParticipantModel: (participant_id, saveInterval) ->\n        model = @findWhere participant_id: participant_id\n        model or @create\n            participant_id: participant_id\n            saveInterval: saveInterval\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nBase = require('./Base')\n\nclass Model extends Base.Model\n\n    save: =>\n        super\n        for model in @collection.parents\n            model.save()\n\nclass Collection extends Base.Collection\n\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require('./Base')\nRandom = require 'utils/random'\n\nclass Model extends Base.Model\n\n    ###\n    Parameter attributes can be of three basic returnTypes:\n    \n    fixedList       equivalent to a CSV or spreadsheet of parameters.\n                    Each attribute defined in this way has an equal\n                    length array of values which must be greater than\n                    or equal to the requested number of trials.\n\n    generatedList   each parameter can take on one of a set of discrete\n                    values, ParameterSet will either return a repeating\n                    set (either randomized or not), or can be combined\n                    with other parameters to produce all possible\n                    combinations.\n\n    generatorFn     Parameters are defined by mathematical functions. Requires\n                    input value for functions (either single value or array of\n                    same length as number of parameters), function to change\n                    input values by (either single function or array of\n                    functions), and number of trials wanted.\n\n    Further, Parameter Attributes can have additional methods based on their\n    dataType, for example, an Array dataType is allowed to be shuffled.\n    ###\n\n    defaults:\n        dataType: \"\"\n        returnType: \"fixedList\"\n        randomized: false\n        parameterName: \"Untitled Parameter\"\n        parameters: []\n        parameterizedAttributes: {}\n\n    returnParameterList: (trials_wanted=null, injectedParameters={}) ->\n        for attribute, name of @get \"parameterizedAttributes\"\n            if name of injectedParameters\n                console.log \"Injecting!\"\n                @set attribute, injectedParameters[name]\n                console.log @get attribute\n        switch @get \"returnType\"\n            when \"fixedList\" then data = @fixedList(trials_wanted)\n            when \"generatedList\" then data = @generatedList(trials_wanted)\n            when \"generatorFn\" then data = @generatorFn(trials_wanted)\n            else console.log \"ParameterSet returnType undefined!\"\n        if @get(\"dataType\") == \"array\"\n            if @get \"shuffled\"\n                data = @shuffleListArrays(data)\n        return data\n\n    fixedList: (trials_wanted) ->\n        parameterList = @get \"parameters\"\n        if parameterList.length < trials_wanted\n            console.warn \"Trials wanted exceeds fixedList length\"\n        if @get \"randomized\"\n            parameterList = Random.seeded_shuffle parameterList,\n                \"TODO - insert a reference to participant ID here!\"\n        if trials_wanted?\n            parameterList = parameterList[0...trials_wanted]\n        return parameterList\n\n    generatedList: (trials_wanted) ->\n        parameterList = []\n        wholelists = Math.floor trials_wanted/@get(\"parameters\").length\n        extra_count = trials_wanted % @get(\"parameters\").length\n        for i in [0...wholelists]\n            parameterList.push.apply parameterList, @get(\"parameters\")\n        if @get \"randomized\"\n            extras = Random.seeded_shuffle @get(\"parameters\"),\n                \"TODO - insert a reference to participant ID here!\"\n            extras = extras[0...extra_count]\n            parameterList.push.apply parameterList, extras\n            parameterList = Random.seeded_shuffle parameterList,\n                \"TODO - insert a reference to participant ID here!\"\n        else\n            parameterList.push.apply parameterList,\n                @get(\"parameters\")[0...extra_count]\n        return parameterList\n\n    generatorFn: (trials_wanted) ->\n        return {}\n\n    shuffleListArrays: (list) ->\n        console.log list\n        for item, index in list\n            list[index] = Random.seeded_shuffle item,\n                \"TODO - insert a reference to participant ID here!\" + index\n        return list\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require('./Base')\nTrialObject = require(\"./TrialObject\")\n\nclass Model extends Base.Model\n    defaults:\n        width: 640\n        height: 480\n        trialObjects: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialObjects'\n        collectionType: TrialObject.Collection\n    ]\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\nTrialEventLog = require('./TrialEventLog')\n\nclass Model extends NestedAPIBase.Model\n\n    defaults:\n        trialeventlogs: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialeventlogs'\n        collectionType: TrialEventLog.Collection\n    ]\n\n    logEvent: (event_type, clock, options={}) =>\n        @addEvent(\n            _.extend options,\n                experiment_time: clock.getTime()\n                trial_time: clock.timerElapsed()\n                event_type: event_type\n                )\n\n    addEvent: (event) ->\n        @get(\"trialeventlogs\").create event\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\n\nclass Model extends NestedAPIBase.Model\n\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nnestedModules = require '../utils/nestedModules'\n\n\nBase = require('./Base')\n\nsubModels = {}\nfor modulename in nestedModules('models/TrialObjects')\n    subModels[modulename] = modulename + \".Model\"\n\nclass Model extends Base.Model\n    subModelTypes: subModels\n\n    defaults: ->\n        delay: 0\n        duration: 5000\n        startWithTrial: true\n        parameterizedAttributes: {}\n        ###\n        Triggers are objects of the form -\n        { eventName: \"change\", objectName: \"firstImage\",\n        callback: \"firstImageMethod\", arguments: {size: 17}}\n        The trigger will be registered to listen to this event\n        on the other trial object, and will invoke this callback\n        with these arguments. An optional argument of \"once\" can be\n        set to true to use listenToOnce instead of listenTo.\n        ###\n        triggers: []\n\n    parameterizedTrial: (parameters) ->\n        attributes = _.clone @attributes\n        for attribute, parameterName of @get \"parameterizedAttributes\"\n            if parameterName of parameters\n                # This allows parameters to be undefined without breaking\n                # the experiment - can be used to dynamically parameterize\n                # trials, e.g. by having them parameterized in some\n                # conditions but not others\n                attributes[attribute] = parameters[parameterName]\n        return attributes\n\n    setParameter: (attribute, parameter) ->\n        @set \"parameterizedAttributes\",\n            @get(\"parameterizedAttributes\")[attribute] = parameter\n\nclass Collection extends Base.Collection\n    model: (attrs, options) ->\n        try\n            modelType = attrs[\"subModelTypeAttribute\"] or\n                PsychoCoffee.trialObjectTypeKeys[attrs[\"type\"]]\n\n            model = PsychoCoffee[modelType][\"Model\"]\n        catch error\n            model = Model\n        new model(attrs, options)\n\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nTrialObject = require(\"../TrialObject\")\n\nclass Model extends TrialObject.Model\n\n    name: ->\n        @get(\"name\") or @get(\"file\")\n\nmodule.exports =\n    Model: Model\n    Type: \"audio\"","'use strict'\n\n###\nThe group trial object acts as a special wrapper around\nother trial objects to group behaviour or properties in\na privileged way.\n\nOne example might be for the randomization of buttons\nacross or participants or across trials. Two buttons would\nbe part of a group, and have their labels determined at\nthe button level - allowing their ordering to be\nparamiterized.\n\nAs such, parameterizedAttributes on group object is\nalways ignored, and any arrays passed in as parameters\nare assumed to be parameters for the children.\n###\n\nTrialObject = require(\"../TrialObject\")\n\nclass Model extends TrialObject.Model\n\n\n    defaults: ->\n        _.extend\n            trialObjects: []\n            super\n    \n    relations: [\n        type: Backbone.Many\n        key: 'trialObjects'\n        collectionType: TrialObject.Collection\n    ]\n\n    parameterizedTrial: (parameters) ->\n        attributes = super()\n        trialObjects = []\n        for model, index in attributes.trialObjects.models\n            localParameters = {}\n            for key, value of parameters\n                if value instanceof Array\n                    localParameters[key] = value[index]\n                else\n                    localParameters[key] = value\n            trialObjects.push model.parameterizedTrial(localParameters)\n        attributes.trialObjects = trialObjects\n        return attributes\n\n    createTrialObject: (options) ->\n        @get(\"trialObjects\").create(options)\n\nmodule.exports =\n    Model: Model\n    Type: \"group\"","'use strict'\n\nTrialObject = require \"../TrialObject\"\nKeys = require \"utils/keys\"\n\nclass Model extends TrialObject.Model\n\n    defaults: ->\n        _.extend\n            keys: _.keys(Keys.Keys)\n            super\n\nmodule.exports =\n    Model: Model\n    Type: \"keyboard\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    objectOptions: ->\n        super().concat(\n            [\n                    name: \"radius\"\n                    default: 24\n                    type: \"number\"\n            ])\n\nmodule.exports =\n    Model: Model\n    Type: \"circle\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    objectOptions: ->\n        super().concat(\n            [\n                    name: \"ry\"\n                    default: 24\n                    type: \"number\"\n                ,\n                    name: \"ry\"\n                    default: 24\n                    type: \"number\"\n            ])\n\nmodule.exports =\n    Model: Model\n    Type: \"ellipse\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    requiredParameters: ->\n        [\n            name: \"file\"\n            default: \"\"\n            type: \"file\"\n            extensions: [\"png\", \"jpg\", \"gif\"]\n        ]\n\n    name: ->\n        @get(\"name\") or @get(\"file\")\n\nmodule.exports =\n    Model: Model\n    Type: \"image\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    requiredParameters: ->\n        [\n            name: \"points\"\n            default: []\n            type: \"array\"\n            embedded-type: fabric.Point\n        ]\n\nmodule.exports =\n    Model: Model\n    Type: \"polygon\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    objectOptions: ->\n        super().concat(\n            [\n                    name: \"rx\"\n                    default: 1\n                    type: \"number\"\n                ,\n                    name: \"ry\"\n                    default: 1\n                    type: \"number\"\n            ])\n\nmodule.exports =\n    Model: Model\n    Type: \"rectangle\"","'use strict'\n\nTextVisualTrialObject = require(\"../TextVisualTrialObject\")\n\nclass Model extends TextVisualTrialObject.Model\n\n    objectOptions: ->\n        super().concat(\n            [\n                    name: \"maxWidth\"\n                    default: 100\n                    type: \"number\"\n                ,\n                    name: \"maxHeight\"\n                    default: 100\n                    type: \"number\"\n                ,\n                    name: \"justify\"\n                    default: \"left\"\n                    type: \"options\"\n                    options: [\"left\", \"right\", \"center\"]\n            ])\n\n    name: ->\n        @get(\"name\") or @get(\"text\")\n\nmodule.exports =\n    Model: Model\n    Type: \"textbox\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n\n    requiredParameters: ->\n        [\n            name: \"text\"\n            default: \"\"\n            type: \"string\"\n        ]\n\n    objectOptions: ->\n        super().concat(\n            [\n                    name: \"fontSize\"\n                    default: 24\n                    type: \"number\"\n                ,\n                    name: \"fontFamily\"\n                    default: \"arial\"\n                    type: \"string\"\n                ,\n                    name: \"fontStyle\"\n                    default: \"normal\"\n                    type: \"string\"\n                ,\n                    name: \"backgroundColor\"\n                    default: \"\"\n                    type: \"hex-colour\"\n            ])\n\n    name: ->\n        @get(\"name\") or @get(\"text\")\n\nmodule.exports =\n    Model: Model\n    Type: \"text\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\nmodule.exports =\n    Model: Model\n    Type: \"triangle\"","'use strict'\n\nTrialObject = require(\"../TrialObject\")\n\nclass Model extends TrialObject.Model\n    defaults: ->\n        defaults = {}\n        for option in @objectOptions()\n            if option.default?\n                defaults[option.name] = option.default\n        for parameter in @requiredParameters()\n            defaults[parameter.name] = parameter.default\n        _.extend defaults, super\n\n    requiredParameters: ->\n        # Lists all parameters needed to initialize object\n        # Assumes listed in order that they appear in args\n        []\n\n    objectOptions: ->\n        [\n            name: \"angle\"\n            default: 0\n            type: \"number\"\n        ,\n            name: \"fill\"\n            default: \"#000000\"\n            type: \"hex-colour\"\n        ,\n            name: \"height\"\n            type: \"number\"\n        ,\n            name: \"left\"\n            default: 0\n            type: \"number\"\n        ,\n            name: \"opacity\"\n            default: 1\n            type: \"number\"\n        ,\n            name: \"originX\"\n            default: \"center\"\n            type: \"options\"\n            options: [\"center\", \"left\", \"right\"]\n        ,\n            name: \"originY\"\n            default: \"center\"\n            type: \"options\"\n            options: [\"center\", \"left\", \"right\"]\n        ,\n            name: \"top\"\n            default: 0\n            type: \"number\"\n        ,\n            name: \"width\"\n            type: \"number\"\n        ]\n\n    returnRequired: ->\n        required = []\n        for parameter in @requiredParameters()\n            required.push @get(parameter.name)\n        return required\n\n    returnOptions: ->\n        options = {}\n        for option in @objectOptions()\n            if @get(option.name)?\n                options[option.name] = @get option.name\n        return options\n\n    allParameters: ->\n        parameters = {}\n        for parameter in @objectOptions().concat @requiredParameters()\n            if @get(parameter.name)?\n                parameters[parameter.name] = @get parameter.name\n        return parameters\n\nmodule.exports =\n    Model: Model","homeView = require(\"../views/HomeView\")\nexperimentView = require(\"../views/ExperimentView\")\n\nmodule.exports = class Router extends Backbone.Router\n    routes:\n        '': 'home'\n\n    home: ->\n        #@loadView new homeView\n        return true\n\n    loadView: (view) ->\n        if @view\n            if @view.close then @view.close() else @view.remove()\n        @view = view\n        @view.appendTo(\"#app\")\n        @view.render()","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  if (helper = helpers.outlet) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outlet); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div id=\\\"messages\\\"></div>\\n<div id=\\\"trials\\\">\\n</div>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<h2>Welcome to PsychoCoffee</h2>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div id=\\\"progressBarContainer\\\"><span>Loading...</span><div id=\\\"progressBar\\\"><div id=\\\"indicator\\\"></div></div></div>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"trial-draw\\\"><canvas id=\\\"trial-canvas\\\" height=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" width=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></canvas></div>\\n<div id=\\\"trial-hidden\\\"></div>\\n\";\n  return buffer;\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","\n# Initialize performance.now to always return a time, regardless of browser.\nwindow.performance = window.performance or {}\n\nperformance.type =\n    if performance.now or\n        performance.mozNow or\n        performance.msNow or\n        performance.oNow or\n        performance.webkitNow\n        then \"html5\"\n    else\n        \"date\"\n\nperformance.now =\n        performance.now    or\n        performance.mozNow    or\n        performance.msNow     or\n        performance.oNow      or\n        performance.webkitNow or\n        -> return new Date().getTime()\n\n# Enable the passage of the 'this' object through the JavaScript timers\n \n__nativeST__ = window.setTimeout\n__nativeSI__ = window.setInterval\n\nwindow.setTimeout = (vCallback, nDelay, aArgs...) ->\n    oThis = this\n    if vCallback instanceof Function\n        callback = -> vCallback.apply(oThis, aArgs)\n    else\n        callback = vCallback\n    __nativeST__(callback, nDelay)\n \nwindow.setInterval = (vCallback, nDelay, aArgs...) ->\n    oThis = this\n    if vCallback instanceof Function\n        callback = -> vCallback.apply(oThis, aArgs)\n    else\n        callback = vCallback\n    __nativeSI__(callback, nDelay)\n\n# http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n# http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n \n# requestAnimationFrame polyfill by Erik Möller\n# fixes from Paul Irish and Tino Zijdel\n \nlastTime = 0\nvendors = ['ms', 'moz', 'webkit', 'o']\nfor vendor in vendors\n    if window.requestAnimationFrame\n        window.AnimationFrameType = \"RequestAnimationFrame\"\n        break\n    window.requestAnimationFrame = window[vendor + 'RequestAnimationFrame']\n    window.cancelAnimationFrame =\n        window[vendor + 'CancelAnimationFrame'] or\n        window[vendors + 'CancelRequestAnimationFrame']\n\n\nif not window.requestAnimationFrame\n    window.AnimationFrameType = \"SetTimeout\"\n    window.requestAnimationFrame = (callback, element) ->\n        currTime = performance.now()\n        timeToCall = Math.max(0, 16 - (currTime - lastTime))\n        id = window.setTimeout(\n            -> callback(currTime + timeToCall),\n            timeToCall\n            )\n        lastTime = currTime + timeToCall\n        return id\n\nif not window.cancelAnimationFrame\n    window.cancelAnimationFrame = (id) ->\n        clearTimeout(id)\n\nclass Clock\n    constructor: (framerate=60) ->\n        _.extend @, Backbone.Events\n        # Set time that clock was initialized\n        @reset()\n        @tick = 1000/framerate\n        @frame = 0\n        @changeEvents = []\n        @timingType = performance.type\n        @animationFrameType = window.AnimationFrameType\n        console.log \"Using clock type:\", @timingType\n\n    reset: =>\n        @start = performance.now()\n\n    getTime: =>\n        performance.now() - @start\n\n    getElapsedTime: (time) =>\n        @getTime() - time\n\n    getAbsoluteTime: ->\n        new Date().getTime()\n\n    setStartTime: (time) =>\n        @start = Number(time)\n\n    delayedTrigger: (delay, object, callback) =>\n        frames = delay/@tick\n        nearestFrame = Math.floor frames\n        timeoutDelay = @tick * (nearestFrame - frames)\n        if timeoutDelay >= 1\n            callback = -> setTimeout(callback, timeoutDelay)\n        object.listenToOnce(@, @frame + nearestFrame, callback)\n\n    startTimer: =>\n        @timerStart = @getTime()\n        @ticktock()\n\n    pauseTimer: =>\n        @pauseTimestamp = @getTime()\n        @stopTimer()\n        if window.confirm(\"Do you really want to stop the experiment?\")\n            window.close()\n        else\n            @resumeTimer(@pauseTimestamp)\n\n    resumeTimer: (timestamp) =>\n        @start += @getTime() - timestamp\n        @ticktock()\n\n    stopTimer: =>\n        clearTimeout @timer\n        @frame = 0\n\n    timerElapsed: =>\n        @getElapsedTime(@timerStart)\n\n    ticktock: =>\n        @timer = setTimeout(\n            @ticktock,\n            @tick - (@timerElapsed() - @frame*@tick)\n            )\n        @trigger(@frame)\n        # console.log \"Tick Tock!\", @timerElapsed() - @frame*@tick\n        @frame += 1\n        # if @frame > 100 then @stopTimer()\n        if @changeEvents.length then @canvas?.renderAll()\n        @changeEvents = []\n\n\nmodule.exports =\n    Clock: Clock","if typeof(window) == 'undefined'\n    _ = require \"underscore\"\nelse\n    _ = window._\n\nid_attr = \"id\"\n\ndiff = (master, update) ->\n    if not master then return update\n    ret = {}\n    for name,value of master\n        if name of update\n            if _.isObject(update[name])\n                if _.isArray(update[name])\n                    ret[name] = []\n                    for i in [0...update[name].length]\n                        array_diff = diff(master[name][i], update[name][i])\n                        if not _.isEmpty(array_diff)\n                            ret[name].push(array_diff)\n                    if ret[name].length == 0 then delete ret[name]\n                else\n                    diff = diff(master[name], update[name])\n                    if not _.isEmpty(diff)\n                        ret[name] = diff\n            else if not _.isEqual(master[name], update[name]) or\n                    name == id_attr\n                ret[name] = update[name]\n    return ret\n\nmerge = (master, update) ->\n    if not master then return update\n    for name, value of update\n        if name of master\n            if _.isObject(update[name])\n                if _.isArray(update[name])\n                    for i in [0...update[name].length]\n                        update_node = update[name][i]\n                        if _.isObject(update_node)\n                            master_node = _.find(master[name], (item) ->\n                                item.id==update_node.id)\n                            if master_node\n                                master_node = merge(master_node, update_node)\n                            else\n                                master[name].push update_node\n                        else\n                            master[name].push update_node\n                else\n                    master[name] = merge(master[name], update[name])\n            else\n                console.log name, master[name], update[name]\n                master[name] = update[name]\n        else\n            master[name] = update[name]\n    return master\n\n\nmodule.exports =\n    Diff: diff\n    Merge: merge","###\n * Checks if a font is available to be used on a web page.\n *\n * @param {String} fontName The name of the font to check\n * @return {Boolean}\n * @license MIT\n * @copyright Sam Clarke 2013\n * @author Sam Clarke <sam@samclarke.com>\n###\nbody          = document.body\ncontainer     = document.createElement('div')\ncontainerCss  = [\n    'position:absolute',\n    'width:auto',\n    'font-size:128px',\n    'left:-99999px'\n]\n\n# Create a span element to contain the test text.\n# Use innerHTML instead of createElement as it's easier\n# to apply CSS to.\ncontainer.innerHTML = '<span style=\"' +\n    containerCss.join(' !important;') + '\">' +\n    Array(100).join('wi') +\n    '</span>'\ncontainer = container.firstChild\n\ncalculateWidth = (fontFamily) ->\n    container.style.fontFamily = fontFamily\n\n    body.appendChild(container)\n    width = container.clientWidth\n    body.removeChild(container)\n\n    return width\n\n# Pre calculate the widths of monospace, serif & sans-serif\n# to improve performance.\nmonoWidth  = calculateWidth('monospace')\nserifWidth = calculateWidth('serif')\nsansWidth  = calculateWidth('sans-serif')\n\nisFontAvailable = (fontName) ->\n    return monoWidth != calculateWidth(fontName + ',monospace') or\n        sansWidth != calculateWidth(fontName + ',sans-serif') or\n        serifWidth != calculateWidth(fontName + ',serif')\n\nfontList = [\n    \"Adobe Jenson\"\n    \"Adobe Text\"\n    \"Albertus\"\n    \"Aldus\"\n    \"Alexandria\"\n    \"Algerian\"\n    \"American Typewriter\"\n    \"Antiqua\"\n    \"Arno\"\n    \"Aster\"\n    \"Aurora\"\n    \"News 706\"\n    \"Baskerville\"\n    \"Bebas\"\n    \"Bebas Neue\"\n    \"Bell\"\n    \"Bembo\"\n    \"Bembo Schoolbook\"\n    \"Berkeley Old Style\"\n    \"Bernhard Modern\"\n    \"Bodoni\"\n    \"Bauer Bodoni\"\n    \"Book Antiqua\"\n    \"Bookman\"\n    \"Bordeaux Roman\"\n    \"Bulmer\"\n    \"Caledonia\"\n    \"Californian FB\"\n    \"Calisto MT\"\n    \"Cambria\"\n    \"Capitals\"\n    \"Cartier\"\n    \"Caslon\"\n    \"Wyld\"\n    \"Caslon Antique\"\n    \"Fifteenth Century\"\n    \"Catull\"\n    \"Centaur\"\n    \"Century Old Style\"\n    \"Century Schoolbook\"\n    \"New Century Schoolbook\"\n    \"Century Schoolbook Infant\"\n    \"Chaparral\"\n    \"Charis SIL\"\n    \"Charter\"\n    \"Cheltenham\"\n    \"Clearface\"\n    \"Cochin\"\n    \"Colonna\"\n    \"Computer Modern\"\n    \"Concrete Roman\"\n    \"Constantia\"\n    \"Cooper Black\"\n    \"Corona\"\n    \"News 705\"\n    \"DejaVu Serif\"\n    \"Didot\"\n    \"Droid Serif\"\n    \"Ecotype\"\n    \"Elephant\"\n    \"Emerson\"\n    \"Espy Serif\"\n    \"Excelsior\"\n    \"News 702\"\n    \"Fairfield\"\n    \"FF Scala\"\n    \"Footlight\"\n    \"FreeSerif\"\n    \"Friz Quadrata\"\n    \"Garamond\"\n    \"Gentium\"\n    \"Georgia\"\n    \"Gloucester\"\n    \"Goudy Old Style\"\n    \"Goudy\"\n    \"Goudy Pro Font\"\n    \"Goudy Schoolbook\"\n    \"Granjon\"\n    \"Heather\"\n    \"Hercules\"\n    \"High Tower Text\"\n    \"Hiroshige\"\n    \"Hoefler Text\"\n    \"Humana Serif\"\n    \"Imprint\"\n    \"Ionic No. 5\"\n    \"News 701\"\n    \"ITC Benguiat\"\n    \"Janson\"\n    \"Jenson\"\n    \"Joanna\"\n    \"Korinna\"\n    \"Kursivschrift\"\n    \"Legacy Serif\"\n    \"Lexicon\"\n    \"Liberation Serif\"\n    \"Linux Libertine\"\n    \"Literaturnaya\"\n    \"Lucida Bright\"\n    \"Melior\",\"Memphis\"\n    \"Miller\"\n    \"Minion\"\n    \"Modern\"\n    \"Mona Lisa\"\n    \"Mrs Eaves\"\n    \"MS Serif\"\n    \"New York\"\n    \"Nimbus Roman\"\n    \"NPS Rawlinson Roadway\"\n    \"OCR A Extended\"\n    \"Palatino\"\n    \"Perpetua\"\n    \"Plantin\"\n    \"Plantin Schoolbook\"\n    \"Playbill\"\n    \"Poor Richard\"\n    \"Renault\"\n    \"Requiem\"\n    \"Roman\"\n    \"Rotis Serif\"\n    \"Sabon\"\n    \"Seagull\"\n    \"Sistina\"\n    \"Souvenir\"\n    \"STIX\"\n    \"Stone Informal\"\n    \"Stone Serif\"\n    \"Sylfaen\"\n    \"Times New Roman\"\n    \"Times\"\n    \"Trajan\"\n    \"Trinité\"\n    \"Trump Mediaeval\"\n    \"Utopia\"\n    \"Vale Type\"\n    \"Vera Serif\"\n    \"Versailles\"\n    \"Wanted\"\n    \"Weiss\"\n    \"Wide Latin\"\n    \"Windsor\"\n    \"XITS\"\n    \"Apex\"\n    \"Archer\"\n    \"Athens\"\n    \"Cholla Slab\"\n    \"City\"\n    \"Clarendon\"\n    \"Courier\"\n    \"Egyptienne\"\n    \"Guardian Egyptian\"\n    \"Lexia\"\n    \"Museo Slab\"\n    \"Nilland\"\n    \"Rockwell\"\n    \"Skeleton Antique\"\n    \"Tower\"\n    \"Abadi\"\n    \"Agency FB\"\n    \"Akzidenz-Grotesk\"\n    \"Andalé Sans\"\n    \"Aptifer\"\n    \"Arial\"\n    \"Arial Unicode MS\"\n    \"Avant Garde Gothic\"\n    \"Avenir\"\n    \"Bank Gothic\"\n    \"Barmeno\"\n    \"Bauhaus\"\n    \"Bell Centennial\"\n    \"Bell Gothic\"\n    \"Benguiat Gothic\"\n    \"Berlin Sans\"\n    \"Beteckna\"\n    \"Blue Highway\"\n    \"Brandon Grotesque\"\n    \"Cabin\"\n    \"Cafeteria\"\n    \"Calibri\"\n    \"Casey\"\n    \"Century Gothic\"\n    \"Charcoal\"\n    \"Chicago\"\n    \"Clearface Gothic\"\n    \"Clearview\"\n    \"Co Headline\"\n    \"Co Text\"\n    \"Compacta\"\n    \"Corbel\"\n    \"DejaVu Sans\"\n    \"Dotum\"\n    \"Droid Sans\"\n    \"Dyslexie\"\n    \"Ecofont\"\n    \"Eras\"\n    \"Espy Sans\"\n    \"Nu Sans\"\n    \"Eurocrat\"\n    \"Eurostile\",\"Square 721\"\n    \"FF Dax\"\n    \"FF Meta\"\n    \"FF Scala Sans\"\n    \"Flama\"\n    \"Formata\"\n    \"Franklin Gothic\"\n    \"FreeSans\"\n    \"Frutiger\"\n    \"Frutiger Next\"\n    \"Futura\"\n    \"Geneva\"\n    \"Gill Sans\"\n    \"Gill Sans Schoolbook\"\n    \"Gotham\"\n    \"Haettenschweiler\"\n    \"Handel Gothic\"\n    \"Denmark\"\n    \"Hei\"\n    \"Helvetica\"\n    \"Helvetica Neue\"\n    \"Swiss 721\"\n    \"Highway Gothic\"\n    \"Hiroshige Sans\"\n    \"Hobo\"\n    \"Impact\"\n    \"Industria\"\n    \"Interstate\"\n    \"Johnston/New Johnston\"\n    \"Kabel\"\n    \"Lato\"\n    \"ITC Legacy Sans\"\n    \"Lexia Readable\"\n    \"Liberation Sans\"\n    \"Lucida Sans\"\n    \"Meiryo\"\n    \"Microgramma\"\n    \"Motorway\"\n    \"MS Sans Serif\"\n    \"Museo Sans\"\n    \"Myriad\"\n    \"Neutraface\"\n    \"Neuzeit S\"\n    \"News Gothic\"\n    \"Nimbus Sans L\"\n    \"Nina\"\n    \"Open Sans\"\n    \"Optima\"\n    \"Parisine\"\n    \"Pricedown\"\n    \"Prima Sans\"\n    \"PT Sans\"\n    \"Rail Alphabet\"\n    \"Revue\"\n    \"Roboto\"\n    \"Rotis Sans\"\n    \"Segoe UI\"\n    \"Skia\"\n    \"Souvenir Gothic\"\n    \"ITC Stone Sans\"\n    \"Syntax\"\n    \"Tahoma\"\n    \"Template Gothic\"\n    \"Thesis Sans\"\n    \"Tiresias\"\n    \"Trade Gothic\"\n    \"Transport\"\n    \"Trebuchet MS\"\n    \"Trump Gothic\"\n    \"Twentieth Century\"\n    \"Ubuntu\"\n    \"Univers\"\n    \"Zurich\"\n    \"Vera Sans\"\n    \"Verdana\"\n    \"Virtue\"\n    \"Amsterdam Old Style\"\n    \"Divona\"\n    \"Nyala\"\n    \"Portobello\"\n    \"Rotis Semi Serif\"\n    \"Tema Cantante\"\n    \"Andale Mono\"\n    \"Anonymous and Anonymous Pro\"\n    \"Arial Monospaced\"\n    \"BatangChe\"\n    \"Bitstream Vera\"\n    \"Consolas\"\n    \"CourierHP\"\n    \"Courier New\"\n    \"CourierPS\"\n    \"Fontcraft Courier\"\n    \"DejaVu Sans Mono\"\n    \"Droid Sans Mono\"\n    \"Everson Mono\"\n    \"Fedra Mono\"\n    \"Fixed\"\n    \"Fixedsys\"\n    \"Fixedsys Excelsior\"\n    \"HyperFont\",\"Inconsolata\"\n    \"KaiTi\"\n    \"Letter Gothic\"\n    \"Liberation Mono\"\n    \"Lucida Console\"\n    \"Lucida Sans Typewriter\"\n    \"Lucida Typewriter\"\n    \"Menlo\"\n    \"MICR\"\n    \"Miriam Fixed\"\n    \"Monaco\"\n    \"Monofur\"\n    \"Monospace\"\n    \"MS Gothic\"\n    \"MS Mincho\"\n    \"Nimbus Mono L\"\n    \"OCR-A\"\n    \"OCR-B\"\n    \"Orator\"\n    \"Ormaxx\"\n    \"PragmataPro\"\n    \"Prestige Elite\"\n    \"ProFont\"\n    \"Proggy programming fonts\"\n    \"SimHei\"\n    \"SimSun\"\n    \"Small Fonts\"\n    \"Sydnie\"\n    \"Terminal\"\n    \"Tex Gyre Cursor\"\n    \"Trixie\"\n    \"Ubuntu Mono\"\n    \"UM Typewriter\"\n    \"Vera Sans Mono\"\n    \"William Monospace\"\n    \"Balloon\"\n    \"Brush Script\"\n    \"Choc\"\n    \"Dom Casual\"\n    \"Dragonwick\"\n    \"Mistral\"\n    \"Papyrus\"\n    \"Segoe Script\"\n    \"Tempus Sans\"\n    \"Amazone\"\n    \"American Scribe\"\n    \"AMS Euler\"\n    \"Apple Chancery\"\n    \"Aquiline\"\n    \"Aristocrat\"\n    \"Bickley Script\"\n    \"Civitype\"\n    \"Codex\"\n    \"Edwardian Script\"\n    \"Forte\"\n    \"French Script\"\n    \"ITC Zapf Chancery\"\n    \"Kuenstler Script\"\n    \"Monotype Corsiva\"\n    \"Old English Text MT\"\n    \"Palace Script\"\n    \"Park Avenue\"\n    \"Scriptina\"\n    \"Shelley Volante\"\n    \"Vivaldi\"\n    \"Vladimir Script\"\n    \"Zapfino\"\n    \"Andy\"\n    \"Ashley Script\"\n    \"Cézanne\"\n    \"Chalkboard\"\n    \"Comic Sans MS\"\n    \"Fontoon\"\n    \"Irregularis\"\n    \"Jefferson\"\n    \"Kristen\"\n    \"Lucida Handwriting\"\n    \"Rage Italic\"\n    \"Rufscript\"\n    \"Scribble\"\n    \"Soupbone\"\n    \"Tekton\"\n    \"Alecko\"\n    \"Cinderella\"\n    \"Coronet\"\n    \"Cupola\"\n    \"Curlz\"\n    \"Magnificat\"\n    \"Script\"\n    \"American Text\"\n    \"Bastard\"\n    \"Breitkopf Fraktur\"\n    \"Cloister Black\"\n    \"Fette Fraktur\"\n    \"Fletcher\"\n    \"Fraktur\"\n    \"Goudy Text\"\n    \"Lucida Blackletter\"\n    \"Old English Text\"\n    \"Schwabacher\",\"Wedding Text\"\n    \"Aegyptus\"\n    \"Aharoni\"\n    \"Aisha\"\n    \"Amienne\"\n    \"Batak Script\"\n    \"Chandas\"\n    \"Grecs du roi\"\n    \"Hanacaraka\"\n    \"Japanese Gothic\"\n    \"Jomolhari\"\n    \"Kochi\"\n    \"Koren\"\n    \"Lontara Script\"\n    \"Maiola\"\n    \"Malgun Gothic\"\n    \"Microsoft JhengHei\"\n    \"Microsoft YaHei\"\n    \"Minchō\"\n    \"Ming\"\n    \"Mona\"\n    \"Nassim\"\n    \"Nastaliq Navees\"\n    \"Neacademia\"\n    \"Perpetua Greek\"\n    \"Porson\"\n    \"Skolar\"\n    \"Skolar Devanagari\"\n    \"Sundanese Unicode\"\n    \"Sutturah\"\n    \"Tai Le Valentinium\"\n    \"Tengwar\"\n    \"Tibetan Machine Uni\"\n    \"Tunga\"\n    \"Wadalab\"\n    \"Wilson Greek\"\n    \"Alphabetum\"\n    \"Batang\"\n    \"Gungsuh\"\n    \"Bitstream Cyberbit\"\n    \"ClearlyU\"\n    \"Code2000\"\n    \"Code2001\"\n    \"Code2002\"\n    \"DejaVu fonts\"\n    \"Doulos SIL\"\n    \"Fallback font\"\n    \"Free UCS Outline Fonts\"\n    \"FreeFont\"\n    \"GNU Unifont\"\n    \"Georgia Ref\"\n    \"Gulim\"\n    \"New Gulim\"\n    \"Junicode\"\n    \"LastResort\"\n    \"Lucida Grande\"\n    \"Lucida Sans Unicode\"\n    \"Nimbus Sans Global\"\n    \"Squarish Sans CT v0.10\"\n    \"Symbola\"\n    \"Titus Cyberbit Basic\"\n    \"Verdana Ref\"\n    \"Y.OzFontN\"\n    \"Apple Symbols\"\n    \"Asana-Math\"\n    \"Blackboard bold\"\n    \"Bookshelf Symbol 7\"\n    \"Braille\"\n    \"Cambria Math\"\n    \"Commercial Pi\"\n    \"Corel\"\n    \"Erler Dingbats\"\n    \"HM Phonetic\"\n    \"Lucida Math\"\n    \"Marlett\"\n    \"Mathematical Pi\"\n    \"Morse Code\"\n    \"OpenSymbol\"\n    \"RichStyle\"\n    \"Symbol\"\n    \"SymbolPS\"\n    \"Webdings\"\n    \"Wingdings\"\n    \"Wingdings 2\"\n    \"Wingdings 3\"\n    \"Zapf Dingbats\"\n    \"Abracadabra\"\n    \"Ad Lib\"\n    \"Allegro\"\n    \"Andreas\"\n    \"Arnold Böcklin\"\n    \"Astur\"\n    \"Balloon Pop Outlaw Black\"\n    \"Banco\"\n    \"Beat\"\n    \"Braggadocio\"\n    \"Broadway\"\n    \"Ellington\"\n    \"Exablock\"\n    \"Exocet\",\"FIG Script\"\n    \"Gabriola\"\n    \"Gigi\"\n    \"Harlow Solid\"\n    \"Harrington\"\n    \"Horizon\"\n    \"Jim Crow\"\n    \"Jokerman\"\n    \"Juice\"\n    \"Lo-Type\"\n    \"Magneto\"\n    \"Megadeth\"\n    \"Neuland\"\n    \"Peignot\"\n    \"Ravie\"\n    \"San Francisco\"\n    \"Showcard Gothic\"\n    \"Snap\"\n    \"Stencil\"\n    \"Umbra\"\n    \"Westminster\"\n    \"Willow\"\n    \"Bagel\"\n    \"Lithos\"\n    \"Talmud\"\n    \"3x3\"\n    \"Compatil\"\n    \"Generis\"\n    \"Grasset\"\n    \"LED\"\n    \"Luxi\"\n    \"System\"\n]\n\n# Based on algorithm outlined in P. Eckersley, 2010\nmodule.exports = fingerprint = ->\n    window.navigator.userAgent +\n        window.navigator.cookieEnabled +\n        (value.name for key,value of window.navigator.plugins).join(\",\") +\n        window.screen.height +\n        window.screen.width +\n        window.screen.colorDepth +\n        (font for font in fontList when isFontAvailable(font)).join(\",\")\n","keys = {\n    \"backspace\" : 8\n    \"tab\" : 9\n    \"enter\" : 13\n    \"shift\": 16\n    \"ctrl\": 17\n    \"alt\": 18\n    \"escape\" : 27\n    \"space\": 32\n    \"page_up\" : 33\n    \"page_down\" : 34\n    \"end\" : 35\n    \"home\" : 36\n    \"insert\" : 45\n    \"delete\" : 46\n    \"0\" : 48\n    \"1\" : 49\n    \"2\" : 50\n    \"3\" : 51\n    \"4\" : 52\n    \"5\" : 53\n    \"6\" : 54\n    \"7\" : 55\n    \"8\" : 56\n    \"9\" : 57\n    \"a\" : 65\n    \"b\" : 66\n    \"c\" : 67\n    \"d\" : 68\n    \"e\" : 69\n    \"f\" : 70\n    \"g\" : 71\n    \"h\" : 72\n    \"i\" : 73\n    \"j\" : 74\n    \"k\" : 75\n    \"l\" : 76\n    \"m\" : 77\n    \"n\" : 78\n    \"o\" : 79\n    \"p\" : 80\n    \"q\" : 81\n    \"r\" : 82\n    \"s\" : 83\n    \"t\" : 84\n    \"u\" : 85\n    \"v\" : 86\n    \"w\" : 87\n    \"x\" : 88\n    \"y\" : 89\n    \"z\" : 90\n    \"numpad0\" : 96\n    \"numpad1\" : 97\n    \"numpad2\" : 98\n    \"numpad3\" : 99\n    \"numpad4\" : 100\n    \"numpad5\" : 101\n    \"numpad6\" : 102\n    \"numpad7\" : 103\n    \"numpad8\" : 104\n    \"numpad9\" : 105\n    \"numpad*\" : 106\n    \"numpad+\" : 107\n    \"numpad-\" : 109\n    \"numpad.\" : 110\n    \"numpad/\" : 111\n    \"f1\" : 112\n    \"f2\" : 113\n    \"f3\" : 114\n    \"f4\" : 115\n    \"f5\" : 116\n    \"f6\" : 117\n    \"f7\" : 118\n    \"f8\" : 119\n    \"f9\" : 120\n    \"f10\" : 121\n    \"f11\" : 122\n    \"f12\" : 123\n    \"num_lock\" : 144\n    \"scroll_lock\" : 145\n    \";\" : 186\n    \"=\" : 187\n    \",\" : 188\n    \"-\" : 189\n    \".\" : 190\n    \"/\" : 191\n    \"[\" : 219\n    \"\\\\\" : 220\n    \"]\" : 221\n    \"'\" : 222\n}\n\ndelete_text = (text) ->\n    text.slice 0, -1\n\ndummy = (text) ->\n    text\n\nkeysToText = {\n    \"backspace\": delete_text\n    \"tab\" : \"\\t\"\n    \"enter\" : \"\\n\"\n    \"delete\" : delete_text\n    \"space\": \" \"\n    \"shift\": dummy\n    \"ctrl\": dummy\n    \"alt\": dummy\n    \"escape\" : dummy\n    \"page_up\" : dummy\n    \"page_down\" : dummy\n    \"end\" : dummy\n    \"home\" : dummy\n    \"insert\" : dummy\n    \"numpad0\" : dummy\n    \"numpad1\" : dummy\n    \"numpad2\" : dummy\n    \"numpad3\" : dummy\n    \"numpad4\" : dummy\n    \"numpad5\" : dummy\n    \"numpad6\" : dummy\n    \"numpad7\" : dummy\n    \"numpad8\" : dummy\n    \"numpad9\" : dummy\n    \"numpad*\" : dummy\n    \"numpad+\" : dummy\n    \"numpad-\" : dummy\n    \"numpad.\" : dummy\n    \"numpad/\" : dummy\n    \"f1\" : dummy\n    \"f2\" : dummy\n    \"f3\" : dummy\n    \"f4\" : dummy\n    \"f5\" : dummy\n    \"f6\" : dummy\n    \"f7\" : dummy\n    \"f8\" : dummy\n    \"f9\" : dummy\n    \"f10\" : dummy\n    \"f11\" : dummy\n    \"f12\" : dummy\n    \"num_lock\" : dummy\n    \"scroll_lock\" : dummy\n}\n\n\nmodule.exports =\n    Keys: keys\n    KeysToText: keysToText","module.exports = (folder, app) ->\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        app[module.split(\"/\").slice(-1)[0]] = require module","module.exports = (folder) ->\n    modulesExported = []\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        modulesExported.push module.split(\"/\").slice(-1)[0]\n    return modulesExported","module.exports = (folder, moduleSubKey) ->\n    subModules = {}\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        subModules[module.split(\"/\").slice(-1)[0]] =\n            require(module)[moduleSubKey]\n        if not subModules[module.split(\"/\").slice(-1)[0]]\n            delete subModules[module.split(\"/\").slice(-1)[0]]\n    return subModules","seeded_shuffle = (source_array, seed) ->\n    random = new Math.seedrandom seed\n    array = source_array.slice 0\n    m = array.length\n\n    # While there remain elements to shuffle…\n    while m\n\n        # Pick a remaining element…\n        i = Math.floor(random() * m--)\n\n        # And swap it with the current element.\n        t = array[m]\n        array[m] = array[i]\n        array[i] = t\n\n    return array\n\nmodule.exports =\n    seeded_shuffle: seeded_shuffle","module.exports = stringHash = (string) ->\n    hash = 0\n    if string.length == 0 then return hash\n    for i in [0...string.length]\n        chr   = string.charCodeAt(i)\n        hash  = ((hash << 5) - hash) + chr\n        hash |= 0\n    return hash\n","'use strict'\n\nView = require './View'\n\nmodule.exports = class BlockView extends View\n\n    initialize: (options) =>\n        super\n        @generateTrialModels()\n        @instantiateSubViews(\"trials\",\n            \"TrialView\", @trialObjectViewType)\n\n    generateTrialModels: ->\n        [trialListLength, parameterSet] = @model.returnParameters()\n        if not trialListLength\n            @model.get(\"trials\").create @model.returnTrialProperties(true)\n        else\n            for parameters in parameterSet\n                trial =\n                    @model.get(\"trials\").create @model.returnTrialProperties()\n                trial.get(\"trialObjects\").add(\n                    (model.parameterizedTrial(parameters) \\\n                    for model in @model.get(\"trialObjects\").models)\n                    )\n\n    preLoadBlock: (queue) =>\n        for key, view of @subViews\n            view.preLoadTrial(queue)\n\n    startBlock: ->\n        @datamodel.set(\"trial\", @datamodel.get(\"trial\") or 0)\n        currentTrial = @model.get(\"trials\").at(@datamodel.get(\"trial\"))\n        @showTrial currentTrial\n\n    showTrial: (trial) =>\n        if not trial\n            console.log \"Done, finito, finished!\"\n            return\n        trialView = @subViews[trial.get(\"id\")]\n        if @trialView\n            if @trialView.close then @trialView.close() else @trialView.remove()\n        @trialdatamodel =\n            @datamodel.get(\"trialdatalogs\").at(@datamodel.get(\"trial\")) or\n            @datamodel.get(\"trialdatalogs\").create()\n        @datamodel.save()\n        @trialView = trialView\n        @trialView.datamodel = @trialdatamodel\n        @trialView.render()\n        @trialView.appendTo(\"#trials\")\n        @listenToOnce @trialView, \"trialEnded\", @nextTrial\n        @trialView.startTrial()\n\n    nextTrial: ->\n        @datamodel.set(\"trial\", @datamodel.get(\"trial\") + 1)\n        currentTrial = @model.get(\"trials\").at(@datamodel.get(\"trial\"))\n        @showTrial currentTrial","'use strict'\n\nclock = require(\"utils/clock\")\nView = require './View'\nExperiment = require '../models/Experiment'\nExperimentDataHandler = require '../models/ExperimentDataHandler'\nTemplate = require 'templates/experiment'\nProgressBarView = require './ProgressBarView'\nstringHash = require 'utils/stringHash'\nfingerprint = require 'utils/fingerprint'\n\nmodule.exports = class ExperimentView extends View\n    template: Template\n\n    initialize: =>\n        super\n        console.log fingerprint()\n        @user_id = stringHash(\"testing!\")\n        @clock = new clock.Clock()\n        @refreshTime()\n        @render()\n        @appendTo(\"#app\")\n        @datacollection = new ExperimentDataHandler.Collection\n        @datacollection.fetch().then =>\n            @datamodel = @datacollection.getOrCreateParticipantModel(2,\n                @model.get(\"saveInterval\"))\n            @instantiateSubViews(\"blocks\", \"BlockView\")\n            @preLoadExperiment()\n\n    refreshTime: =>\n        @time = @clock.getTime()\n\n    startBlock: (block) =>\n        blockView = @subViews[block.get(\"id\")]\n        if @blockView\n            if @blockView.close then @blockView.close() else @blockView.remove()\n        @blockdatamodel = @datamodel.get(\"blockdatahandlers\").at(block) or\n            @datamodel.get(\"blockdatahandlers\").create()\n        @datamodel.save()\n        @blockView = blockView\n        @blockView.datamodel = @blockdatamodel\n        @blockView.render()\n        @blockView.startBlock()\n\n    preLoadExperiment: ->\n        queue = new createjs.LoadQueue true\n        for key, view of @subViews\n            view.preLoadBlock(queue)\n        progressBarView = new ProgressBarView\n            queue: queue\n            complete: @startExperiment\n        progressBarView.appendTo(\"#messages\")\n        progressBarView.render()\n        \n\n    startExperiment: =>\n        currentBlock = @model.get(\"blocks\").at(@datamodel.get(\"block\") or 0)\n        @startBlock currentBlock\n","'use strict'\n\ntemplate = require '../templates/home'\nView = require './View'\n\nmodule.exports = class HomeView extends View\n    id: 'home-view'\n    template: template","'use strict'\n\ntemplate = require '../templates/progressbar'\nView = require './View'\n\nmodule.exports = class ProgressBarView extends View\n    template: template\n\n    initialize: (options) =>\n        super\n        @queue = options.queue\n        @complete = options.complete\n        @queue.on \"progress\", @progress\n        @queue.on \"complete\", @finish\n\n    progress: (data) =>\n        @setProgressBar data.progress\n\n    finish: =>\n        @$el.animate(\n            opacity: 0,\n            1000,\n            \"swing\",\n            @close\n            )\n\n    close: =>\n        @complete()\n        @remove()\n\n    setProgressBar: (fraction) ->\n        progressBarWidth = fraction * @$el.find(\"#progressBar\").width()\n        @$el.find(\"#indicator\").animate(\n            width: progressBarWidth,\n            100).html(\n            Math.round(fraction * 100) + \"%&nbsp;\")","'use strict'\n\nView = require './View'\n\nmodule.exports = class TrialObjectView extends View\n\n    initialize: ->\n        super\n        if not @model.get \"file\" then @render()\n        @active = false\n        @name = @model.name()\n\n    attach: (endpoints) ->\n        return\n\n    preLoadTrialObject: (queue) =>\n        if @model.get(\"file\")\n            @object_id = @model.get(\"file\")\n            if not queue.getItem(@object_id)\n                queue.loadFile src: @object_id\n            queue.on \"fileload\", @postFileLoad\n\n    postFileLoad: (data) =>\n        if data.item.src == @model.get(\"file\")\n            @file_object = data.result\n            @render()\n\n    render: =>\n        console.debug \"Rendering #{@constructor.name}\"\n        @$el.html @file_object\n\n    logEvent: (event_type, options={}) =>\n        @datamodel.logEvent(\n            event_type\n            @clock\n            _.extend options,\n                object: @model.name()\n                details: @logDetails()\n                )\n\n    addToClockChangeEvents: (event) ->\n        @clock.changeEvents.push event\n\n    logDetails: ->\n        if PsychoCoffee.DEBUG\n            @model.attributes\n        else\n            @model.get(\"type\") or @model.get(\"subModelTypeAttribute\")\n\n    activate: ->\n        if not @active\n            @trigger \"activated\"\n            @logEvent(\"activated\")\n            @active = true\n            @listenTo @model, \"change\", @render\n            if @model.get(\"duration\")\n                @clock.delayedTrigger(\n                    @model.get(\"duration\"),\n                    @, @deactivate)\n\n    deactivate: ->\n        if @active\n            @trigger \"deactivated\"\n            @logEvent(\"deactivated\")\n            @active = false\n            @stopListening @model, \"change\", @render\n\n    registerEvents: (siblingViews) =>\n        if @model.get(\"startWithTrial\")\n            @clock.delayedTrigger @model.get(\"delay\"), @, @activate\n        for trigger in (@model.get(\"triggers\") or [])\n            view = _.find(siblingViews, (sibling) ->\n                sibling.name == trigger.objectName\n                )\n            @listenTo view, trigger.eventName, (options) =>\n                console.log \"Triggering\", trigger.eventName\n                @[trigger.callback](_.extend(options, trigger.arguments or {}))","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\n\nmodule.exports = class AudioTrialObjectView extends TrialObjectView\n\n    attach: (endpoints) ->\n        @appendTo endpoints.hidden\n\n    preLoadTrialObject: (queue) =>\n        queue.installPlugin createjs.Sound\n        super\n\n    activate: ->\n        @object.play()\n        super()\n\n    deactivate: ->\n        @object.stop()\n        super()\n\n    render: =>\n        if not @object\n            @object = createjs.Sound.createInstance @object_id\n    # @object.on \"succeeded\", => console.log @clock.timerElapsed(), \"playing\"\n    # @object.on \"complete\", => console.log @clock.timerElapsed(), \"stopping\"","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\n\nmodule.exports = class GroupTrialObjectView extends TrialObjectView\n\n    initialize: (options) =>\n        super\n        @instantiateSubViews(\"trialObjects\",\n            \"TrialObjectView\", @trialObjectViewType)\n        @registerSubViewSubViews()\n\n    preLoadTrialObject: (queue) =>\n        for view in @subViewList\n            view.preLoadTrialObject(queue)\n\n    attach: (endpoints) ->\n        for view in @subViewList\n            view.attach(endpoints)\n\n    activate: ->\n        for view in @subViewList\n            view.activate()\n        super()\n\n    deactivate: ->\n        for view in @subViewList\n            view.deactivate()\n        super()\n\n    render: ->\n        return\n\n    # Repeats code from TrialView - not DRY at all!\n    trialObjectViewType: (model) ->\n        elementType = model.get(\"subModelTypeAttribute\") or\n            PsychoCoffee.trialObjectTypeKeys[model.get(\"type\")]\n\n        # For this to work, any models subclassed from TrialObject must be named\n        # ModelName, and the associated View must be named ModelNameView\n\n        elementView = elementType + \"View\"\n\n        try\n            PsychoCoffee[elementView]\n            elementView\n        catch error\n            console.debug error, \"Unknown element type #{elementType}\"","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\nKeys = require \"utils/keys\"\n\nmodule.exports = class KeyboardTrialObjectView extends TrialObjectView\n\n    initialize: =>\n        super\n        @keyCodeCache = _.invert(_.pick(Keys.Keys, @model.get(\"keys\")))\n\n    attach: (endpoints) ->\n        @object = $(window)\n\n    activate: =>\n        @object.keydown @keyPressed\n        super()\n\n    deactivate: ->\n        @object.unbind \"keydown\", @keyPressed\n        super()\n\n    keyPressed: (event) =>\n        if _.has(@keyCodeCache, event.keyCode)\n            key = @keyCodeCache[event.keyCode]\n            @trigger \"keypress\", key: key, shiftKey: event.shiftKey\n            @logEvent \"keypress\", key: key\n\n    render: ->\n        return\n","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports = class CircleVisualTrialObjectView extends VisualTrialObjectView\n\n    object_type:\n        fabric.Circle","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports =\n    class EllipseVisualTrialObjectView extends VisualTrialObjectView\n\n        object_type:\n            fabric.Ellipse","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports = class ImageVisualTrialObjectView extends VisualTrialObjectView\n\n    render: ->\n        if not @object\n            @object = new fabric.Image @file_object, @model.returnOptions()\n        super","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports =\n    class PolygonVisualTrialObjectView extends VisualTrialObjectView\n\n        object_type:\n            fabric.Polygon\n\n        render: ->\n            if not @object\n                @object = new @object_type @model.returnRequired()[0],\n                    @model.returnOptions()\n            super","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports =\n    class RectangleVisualTrialObjectView extends VisualTrialObjectView\n\n        object_type:\n            fabric.Rect","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\nKeys = require \"utils/keys\"\n\nmodule.exports = class TextVisualTrialObjectView extends VisualTrialObjectView\n\n    object_type:\n        fabric.Text\n\n    render: ->\n        if not @object\n            @object = new @object_type @model.returnRequired()[0],\n                @model.returnOptions()\n        super\n\n    addText: (options) ->\n        if \"text\" of options\n            text = options.text\n        else if \"key\" of options\n            text = Keys.KeysToText[options.key] or options.key\n            if typeof text == \"string\" and options.shiftKey\n                console.log \"True\"\n                text = text.toUpperCase()\n        if text instanceof Function\n            @model.set(\"text\", text(@model.get(\"text\")))\n        else\n            @model.set(\"text\", @model.get(\"text\") + text)","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports =\n    class TriangleVisualTrialObjectView extends VisualTrialObjectView\n\n        object_type:\n            fabric.Triangle","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\n\nmodule.exports = class VisualTrialObjectView extends TrialObjectView\n\n    attach: (endpoints) ->\n        @canvas = endpoints.canvas\n        @object.setVisible false\n        @canvas.add @object\n\n    activate: ->\n        @object.hasControls = false\n        @object.hasBorders = false\n        @object.lockMovementX = @object.lockMovementY = true\n        @object.setVisible true\n        @addToClockChangeEvents(\"activated\")\n        @object.on \"mousedown\", (event) =>\n            @trigger \"click\"\n            @logEvent \"click\"\n        super()\n\n    deactivate: ->\n        @object.setVisible false\n        @addToClockChangeEvents(\"deactivated\")\n        @object.off \"mousedown\"\n        super()\n\n    render: ->\n        if not @object\n            @object = new @object_type()\n        @object.set @model.allParameters()\n        @addToClockChangeEvents(\"change\")","'use strict'\n\nView = require './View'\nTemplate = require 'templates/trial'\n\nmodule.exports = class TrialView extends View\n    template: Template\n\n    initialize: (options) =>\n        super\n        @instantiateSubViews(\"trialObjects\",\n            \"TrialObjectView\", @trialObjectViewType)\n        @registerSubViewSubViews()\n\n    preLoadTrial: (queue) =>\n        for key, view of @subViews\n            view.preLoadTrialObject(queue)\n\n    trialObjectViewType: (model) ->\n        elementType = model.get(\"subModelTypeAttribute\") or\n            PsychoCoffee.trialObjectTypeKeys[model.get(\"type\")]\n\n        # For this to work, any models subclassed from TrialObject must be named\n        # ModelName, and the associated View must be named ModelNameView\n\n        elementView = elementType + \"View\"\n\n        try\n            PsychoCoffee[elementView]\n            elementView\n        catch error\n            console.debug error, \"Unknown element type #{elementType}\"\n\n    startTrial: ->\n        @createCanvas()\n        for view in @subViewList\n            view.attach canvas: @canvas, hidden: @$(\"#trial-hidden\")\n            view.datamodel = @datamodel\n            view.registerEvents(@subViewList)\n        @registerEvents()\n        @registerTimeout()\n        @clock.startTimer()\n        @logEvent \"trial_start\"\n\n    createCanvas: =>\n        @canvas = new fabric.Canvas \"trial-canvas\"\n        @canvas.selection = false\n        @canvas.hoverCursor = 'default'\n        @clock.canvas = @canvas\n\n    canvasPerformanceTracking: (options) =>\n        now = options.event_time\n        @canvas.on \"after:render\", =>\n            console.log @clock.timerElapsed() - now,\n                \"ms between object added/removed and render completion\"\n            @canvas.off(\"after:render\")\n\n    logEvent: (event_type, options={}) =>\n        @datamodel.logEvent(\n            event_type\n            @clock\n            _.extend options,\n                object: @model.name()\n                )\n\n    registerTimeout: =>\n        if @model.get \"timeout\"\n            @clock.delayedTrigger @model.get(\"timeout\"), @, @endTrial\n\n    endTrial: ->\n        @logEvent \"trial_end\"\n        for key, view of @subViews\n            view.deactivate()\n            view.remove()\n        @clock.stopTimer()\n        delete @clock.canvas\n        delete @canvas\n        @stopListening()\n        @remove()\n        @trigger \"trialEnded\"\n\n    registerEvents: =>\n        for trigger in (@model.get(\"triggers\") or [])\n            view = _.find(@subViews, (subView) ->\n                subView.name == trigger.objectName\n                )\n            @listenTo view, trigger.eventName, =>\n                @[trigger.callback](trigger.arguments or {})","# require 'lib/view_helper'\n\n# Base class for all views.\nmodule.exports = class View extends Backbone.View\n    initialize: (options) =>\n        super\n        @clock = options.clock\n\n    template: ->\n        return\n\n    getRenderData: ->\n        return @model?.attributes or {}\n\n    render: =>\n        console.debug \"Rendering #{@constructor.name}\"\n        @$el.html @template @getRenderData()\n        @afterRender()\n        return @\n\n    appendTo: (el) =>\n        $(el).append(@el)\n\n    instantiateSubViews: (key, viewType, viewFunction) =>\n        @subViews = {}\n        for model in @model.get(key).models\n            if viewFunction then viewType = viewFunction(model)\n            @subViews[model.id] = new PsychoCoffee[viewType]\n                model: model\n                clock: @clock\n        @subViewList = _.values(@subViews)\n\n    registerSubViewSubViews: ->\n        for subView in @subViewList\n            for key, value of subView.subViews\n                @subViews[key] = value\n        @subViewList = _.values(@subViews)\n\n    afterRender: ->\n        return","'use strict';\n\nmodule.exports = 'development';\n"]}