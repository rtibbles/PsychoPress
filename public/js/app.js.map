{"version":3,"file":"public/js/app.js","sources":["app/app/app.coffee","app/initialize.coffee","app/models/APIBase.coffee","app/models/Base.coffee","app/models/Block.coffee","app/models/BlockDataHandler.coffee","app/models/Experiment.coffee","app/models/ExperimentDataHandler.coffee","app/models/NestedAPIBase.coffee","app/models/ParameterSet.coffee","app/models/Trial.coffee","app/models/TrialDataLog.coffee","app/models/TrialEventLog.coffee","app/models/TrialObject.coffee","app/models/TrialObjects/AudioTrialObject.coffee","app/models/TrialObjects/KeyboardTrialObject.coffee","app/models/TrialObjects/Visual/ImageVisualTrialObject.coffee","app/models/TrialObjects/Visual/TextVisualTrialObject.coffee","app/models/TrialObjects/VisualTrialObject.coffee","app/routes/router.coffee","app/templates/application.hbs","app/templates/experiment.hbs","app/templates/home.hbs","app/templates/progressbar.hbs","app/templates/trial.hbs","app/utils/clock.coffee","app/utils/diff.coffee","app/utils/keys.coffee","app/utils/nestedImport.coffee","app/utils/nestedModules.coffee","app/utils/nestedSelectiveImport.coffee","app/utils/random.coffee","app/views/BlockView.coffee","app/views/ExperimentView.coffee","app/views/HomeView.coffee","app/views/ProgressBarView.coffee","app/views/TrialObjectView.coffee","app/views/TrialObjectViews/AudioTrialObjectView.coffee","app/views/TrialObjectViews/KeyboardTrialObjectView.coffee","app/views/TrialObjectViews/Visual/ImageVisualTrialObjectView.coffee","app/views/TrialObjectViews/Visual/TextVisualTrialObjectView.coffee","app/views/TrialObjectViews/VisualTrialObjectView.coffee","app/views/TrialView.coffee","app/views/View.coffee","envs/development/env.js"],"names":[],"mappings":"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","sourcesContent":["'use strict'\n\n# The application bootstrapper.\nPsychoCoffee =\n    initialize: ->\n        Router = require '../routes/router'\n\n        # Instantiate the router\n        @router = new Router()\n        # Freeze the object\n        Object.freeze? this\n\nmodule.exports = PsychoCoffee","'use strict'\nPsychoCoffee = window.PsychoCoffee = require './app/app'\nnestedImport = require './utils/nestedImport'\nnestedSelectiveImport = require '../utils/nestedSelectiveImport'\ncreatejs.FlashPlugin.swfPath = \"/widgets/SoundJS/\"\ncreatejs.Sound.registerPlugins [\n    createjs.WebAudioPlugin\n    createjs.HTMLAudioPlugin\n    createjs.FlashPlugin\n    ]\n\n# Load all modules in order automagically.\nfolderOrder = [\n    'utils', 'routes', 'models',\n    'views', 'templates'\n  ]\n\nfolderOrder.forEach (folder) -> nestedImport folder, PsychoCoffee\n\n# A convenience method for specifying the 'type' of\n# a trial object by a short hand type.\nPsychoCoffee.trialObjectTypeKeys =\n    _.invert nestedSelectiveImport('models/TrialObjects', \"Type\")\n\n$ ->\n    PsychoCoffee.initialize()\n    Backbone.history.start()","'use strict'\n\nBase = require('./Base')\n\nclass Model extends Base.Model\n\n\nclass Collection extends Base.Collection\n    # Overwrite base model non-syncing behaviour\n    urlBase: \"/api/\"\n    local: false\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nclass Model extends Backbone.AssociatedModel\n    name: ->\n        @get(\"name\") or @id\n\nclass Collection extends Backbone.Collection\n    url: \"none\"\n    local: true\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require './Base'\nTrial = require './Trial'\nTrialObject = require './TrialObject'\nParameterSet = require './ParameterSet'\n\nclass Model extends Base.Model\n    defaults:\n        trials: []\n        title: \"\"\n        width: 640\n        height: 480\n        timeout: 1000\n        parameterSet: {}\n        trialObjects: []\n\n    trialProperties: [\n        \"title\"\n        \"width\"\n        \"height\"\n        \"timeout\"\n    ]\n\n    relations: [\n        type: Backbone.Many\n        key: 'trials'\n        collectionType: Trial.Collection\n    ,\n        type: Backbone.Many\n        key: 'trialObjects'\n        collectionType: TrialObject.Collection\n    ,\n        type: Backbone.One\n        key: 'parameterSet'\n        relatedModel: ParameterSet.Model\n    ]\n\n    returnParameters: ->\n        @get(\"parameterSet\").returnTrialParameters @get(\"numberOfTrials\")\n\n    returnTrialProperties: (clone=false) ->\n        attributes = {}\n        for key in @trialProperties\n            attributes[key] = @get(key)\n        if clone then attributes[\"trialObjects\"] = @get \"trialObjects\"\n        return attributes\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\nTrialDataLog = require('./TrialDataLog')\n\nclass Model extends NestedAPIBase.Model\n\n    defaults:\n        trialdatalogs: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialdatalogs'\n        collectionType: TrialDataLog.Collection\n    ]\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nBase = require('./Base')\nBlock = require('./Block')\n\nclass Model extends Base.Model\n    defaults:\n        blocks: []\n        title: \"Experiment\"\n        # This attribute determines the time intervals between\n        # saves to the API for experimental data.\n        # Larger save intervals will give better performance,\n        # But increase risk of data loss.\n        saveInterval: 10000\n\n    relations: [\n        type: Backbone.Many\n        key: 'blocks'\n        collectionType: Block.Collection\n    ]\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nAPIBase = require './APIBase'\nBlockDataHandler = require './BlockDataHandler'\nDiff = require 'utils/diff'\n\nclass Model extends APIBase.Model\n\n    initialize: ->\n        @lastSync = 0\n\n    defaults:\n        blockdatahandlers: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'blockdatahandlers'\n        collectionType: BlockDataHandler.Collection\n    ]\n\n    sync: (method, model, options) =>\n        syncNow = => @syncNow(method,model,options)\n        delayTime = @lastSync + @get(\"saveInterval\") - performance.now()\n        if delayTime <= 0\n            @syncNow()\n        else\n            if not @syncCache\n                @syncCache = setTimeout syncNow, delayTime\n\n    syncNow: (method, model, options) =>\n        if not _.isEmpty(@serverState)\n            options.attrs = Diff.Diff(@serverState, model.toJSON())\n            options.method = 'patch'\n            options.success = (saved) =>\n                if saved\n                    @serverState = @toJSON()\n        else\n            options.success = (data) =>\n                @set(data)\n                @serverState = @toJSON()\n        @lastSync = performance.now()\n        clearTimeout(@syncCache)\n        delete @syncCache\n        try\n            Backbone.sync(method, model, options)\n        catch e\n            console.debug e, method, model, options\n        \n\nclass Collection extends APIBase.Collection\n    model: Model\n    url: =>\n        @urlBase + \"experimentdatahandlers\"\n\n    getOrCreateParticipantModel: (participant_id, saveInterval) ->\n        model = @findWhere participant_id: participant_id\n        model or @create\n            participant_id: participant_id\n            saveInterval: saveInterval\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nBase = require('./Base')\n\nclass Model extends Base.Model\n\n    save: =>\n        super\n        for model in @collection.parents\n            model.save()\n\nclass Collection extends Base.Collection\n\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require('./Base')\nRandom = require 'utils/random'\n\nclass Model extends Base.Model\n\n    ###\n    Parameters can be of three basic types:\n    fixedList   equivalent to a CSV or spreadsheet of parameters.\n                Each attribute has an equal length array of values\n                which will be assigned based on the index.\n    randomList  each parameter can take on one of a set of discrete\n                values, ParameterSet will return all possible combinations,\n                or a pseudorandom subset up to a max number. Subset will be\n                seeded by participant id so will be deterministic on refresh.\n    generatorFn Parameters are defined by mathematical functions. Requires\n                input value for functions (either single value or array of\n                same length as number of parameters), function to change input\n                values by (either single function or array of functions), and\n                number of trials wanted.\n    ###\n\n    defaults:\n        type: \"fixedList\"\n        randomized: false\n\n    returnTrialParameters: (trials_wanted=null) ->\n        switch @get \"type\"\n            when \"fixedList\" then return @fixedList(trials_wanted)\n            when \"randomList\" then return @randomList(trials_wanted)\n            when \"generatorFn\" then return @generatorFn(trials_wanted)\n            else console.log \"ParameterSet type undefined!\"\n\n    fixedList: (trials_wanted) ->\n        length = 0\n        parameterSet = []\n        parameterList = []\n        for key, value of @get \"parameters\"\n            parameterList.push key\n            length = value.length\n        for i in [0...length]\n            parameters =\n                _.object parameterList,\n                    (@get(\"parameters\")[parameter][i] \\\n                        for parameter in parameterList)\n            parameterSet.push parameters\n        if @get \"randomized\"\n            parameterSet = Random.seeded_shuffle parameterSet,\n                \"TODO - insert a reference to participant ID here!\"\n        if trials_wanted?\n            parameterSet = parameterSet[0...trials_wanted]\n        return [length, parameterSet]\n\n    randomList: (trials_wanted) ->\n        return {}\n\n    generatorFn: (trials_wanted) ->\n        return {}\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection\n","'use strict'\n\nBase = require('./Base')\nTrialObject = require(\"./TrialObject\")\n\nclass Model extends Base.Model\n    defaults:\n        width: 640\n        height: 480\n        trialObjects: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialObjects'\n        collectionType: TrialObject.Collection\n    ]\n\nclass Collection extends Base.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\nTrialEventLog = require('./TrialEventLog')\n\nclass Model extends NestedAPIBase.Model\n\n    defaults:\n        trialeventlogs: []\n\n    relations: [\n        type: Backbone.Many\n        key: 'trialeventlogs'\n        collectionType: TrialEventLog.Collection\n    ]\n\n    logEvent: (event_type, clock, options={}) =>\n        @addEvent(\n            _.extend options,\n                experiment_time: clock.getTime()\n                trial_time: clock.timerElapsed()\n                event_type: event_type\n                )\n\n    addEvent: (event) ->\n        @get(\"trialeventlogs\").create event\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nNestedAPIBase = require('./NestedAPIBase')\n\nclass Model extends NestedAPIBase.Model\n\n\nclass Collection extends NestedAPIBase.Collection\n    model: Model\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nnestedModules = require '../utils/nestedModules'\n\n\nBase = require('./Base')\n\nsubModels = {}\nfor modulename in nestedModules('models/TrialObjects')\n    subModels[modulename] = modulename + \".Model\"\n\nclass Model extends Base.Model\n    subModelTypes: subModels\n\n    defaults: ->\n        delay: 0\n        duration: 5000\n        parameterizedAttributes: {}\n        ###\n        Triggers are objects of the form -\n        { eventName: \"change\", objectName: \"firstImage\",\n        callback: \"firstImageMethod\", arguments: {size: 17}}\n        The trigger will be registered to listen to this event\n        on the other trial object, and will invoke this callback\n        with these arguments. An optional argument of \"once\" can be\n        set to true to use listenToOnce instead of listenTo.\n        ###\n        triggers: []\n\n    parameterizedTrial: (parameters) ->\n        attributes = _.clone @attributes\n        for attribute, parameterName of @get \"parameterizedAttributes\"\n            attributes[attribute] = parameters[parameterName]\n        return attributes\n\n    setParameter: (attribute, parameter) ->\n        @set \"parameterizedAttributes\",\n            @get(\"parameterizedAttributes\")[attribute] = parameter\n\nclass Collection extends Base.Collection\n    model: (attrs, options) ->\n        try\n            modelType = attrs[\"subModelTypeAttribute\"] or\n                PsychoCoffee.trialObjectTypeKeys[attrs[\"type\"]]\n\n            model = PsychoCoffee[modelType][\"Model\"]\n        catch error\n            model = Model\n        new model(attrs, options)\n\n\nmodule.exports =\n    Model: Model\n    Collection: Collection","'use strict'\n\nTrialObject = require(\"../TrialObject\")\n\nclass Model extends TrialObject.Model\n\n    name: ->\n        @get(\"name\") or @get(\"file\")\n\nmodule.exports =\n    Model: Model\n    Type: \"audio\"","'use strict'\n\nTrialObject = require \"../TrialObject\"\nKeys = require \"utils/keys\"\n\nclass Model extends TrialObject.Model\n\n    defaults: ->\n        _.extend\n            keys: _.keys(Keys.Keys)\n\nmodule.exports =\n    Model: Model\n    Type: \"keyboard\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n\n    name: ->\n        @get(\"name\") or @get(\"file\")\n\nmodule.exports =\n    Model: Model\n    Type: \"image\"","'use strict'\n\nVisualTrialObject = require(\"../VisualTrialObject\")\n\nclass Model extends VisualTrialObject.Model\n    defaults: ->\n        _.extend\n            text: \"hello\"\n            fontSize: 24\n            fontFamily: \"arial\"\n            fontStyle: \"normal\"\n            super\n\n    name: ->\n        @get(\"name\") or @get(\"text\")\n\nmodule.exports =\n    Model: Model\n    Type: \"text\"","'use strict'\n\nTrialObject = require(\"../TrialObject\")\n\nclass Model extends TrialObject.Model\n    defaults: ->\n        _.extend\n            angle: 0\n            fill: \"#000000\"\n            height: 0\n            left: 0\n            opacity: 1\n            originX: \"center\"\n            originY: \"center\"\n            top: 0\n            width: 0\n            super\n\nmodule.exports =\n    Model: Model","homeView = require(\"../views/HomeView\")\nexperimentView = require(\"../views/ExperimentView\")\n\nmodule.exports = class Router extends Backbone.Router\n    routes:\n        '': 'home'\n\n    home: ->\n        #@loadView new homeView\n        return true\n\n    loadView: (view) ->\n        if @view\n            if @view.close then @view.close() else @view.remove()\n        @view = view\n        @view.appendTo(\"#app\")\n        @view.render()","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  if (helper = helpers.outlet) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outlet); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n\";\n  return buffer;\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div id=\\\"messages\\\"></div>\\n<div id=\\\"trials\\\">\\n</div>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<h2>Welcome to PsychoCoffee</h2>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div id=\\\"progressBarContainer\\\"><span>Loading...</span><div id=\\\"progressBar\\\"><div id=\\\"indicator\\\"></div></div></div>\";\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"trial-draw\\\"><canvas id=\\\"trial-canvas\\\" height=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" width=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></canvas></div>\\n<div id=\\\"trial-hidden\\\"></div>\\n\";\n  return buffer;\n  });\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","\n# Initialize performance.now to always return a time, regardless of browser.\nwindow.performance = window.performance or {}\n\nperformance.type =\n    if performance.now or\n        performance.mozNow or\n        performance.msNow or\n        performance.oNow or\n        performance.webkitNow\n        then \"html5\"\n    else\n        \"date\"\n\nperformance.now =\n        performance.now    or\n        performance.mozNow    or\n        performance.msNow     or\n        performance.oNow      or\n        performance.webkitNow or\n        -> return new Date().getTime()\n\n# Enable the passage of the 'this' object through the JavaScript timers\n \n__nativeST__ = window.setTimeout\n__nativeSI__ = window.setInterval\n\nwindow.setTimeout = (vCallback, nDelay, aArgs...) ->\n    oThis = this\n    if vCallback instanceof Function\n        callback = -> vCallback.apply(oThis, aArgs)\n    else\n        callback = vCallback\n    __nativeST__(callback, nDelay)\n \nwindow.setInterval = (vCallback, nDelay, aArgs...) ->\n    oThis = this\n    if vCallback instanceof Function\n        callback = -> vCallback.apply(oThis, aArgs)\n    else\n        callback = vCallback\n    __nativeSI__(callback, nDelay)\n\n# http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n# http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n \n# requestAnimationFrame polyfill by Erik Möller\n# fixes from Paul Irish and Tino Zijdel\n \nlastTime = 0\nvendors = ['ms', 'moz', 'webkit', 'o']\nfor vendor in vendors\n    if window.requestAnimationFrame\n        window.AnimationFrameType = \"RequestAnimationFrame\"\n        break\n    window.requestAnimationFrame = window[vendor + 'RequestAnimationFrame']\n    window.cancelAnimationFrame =\n        window[vendor + 'CancelAnimationFrame'] or\n        window[vendors + 'CancelRequestAnimationFrame']\n\n\nif not window.requestAnimationFrame\n    window.AnimationFrameType = \"SetTimeout\"\n    window.requestAnimationFrame = (callback, element) ->\n        currTime = performance.now()\n        timeToCall = Math.max(0, 16 - (currTime - lastTime))\n        id = window.setTimeout(\n            -> callback(currTime + timeToCall),\n            timeToCall\n            )\n        lastTime = currTime + timeToCall\n        return id\n\nif not window.cancelAnimationFrame\n    window.cancelAnimationFrame = (id) ->\n        clearTimeout(id)\n\nclass Clock\n    constructor: (framerate=60) ->\n        _.extend @, Backbone.Events\n        # Set time that clock was initialized\n        @reset()\n        @tick = 1000/framerate\n        @frame = 0\n        @changeEvents = []\n        @timingType = performance.type\n        @animationFrameType = window.AnimationFrameType\n        console.log \"Using clock type:\", @timingType\n\n    reset: =>\n        @start = performance.now()\n\n    getTime: =>\n        performance.now() - @start\n\n    getElapsedTime: (time) =>\n        @getTime() - time\n\n    getAbsoluteTime: ->\n        new Date().getTime()\n\n    setStartTime: (time) =>\n        @start = Number(time)\n\n    delayedTrigger: (delay, object, callback) =>\n        frames = delay/@tick\n        nearestFrame = Math.floor frames\n        timeoutDelay = @tick * (nearestFrame - frames)\n        if timeoutDelay >= 1\n            callback = -> setTimeout(callback, timeoutDelay)\n        object.listenToOnce(@, @frame + nearestFrame, callback)\n\n    startTimer: =>\n        @timerStart = @getTime()\n        @ticktock()\n\n    pauseTimer: =>\n        @pauseTimestamp = @getTime()\n        @stopTimer()\n        if window.confirm(\"Do you really want to stop the experiment?\")\n            window.close()\n        else\n            @resumeTimer(@pauseTimestamp)\n\n    resumeTimer: (timestamp) =>\n        @start += @getTime() - timestamp\n        @ticktock()\n\n    stopTimer: =>\n        clearTimeout @timer\n        @frame = 0\n\n    timerElapsed: =>\n        @getElapsedTime(@timerStart)\n\n    ticktock: =>\n        @timer = setTimeout(\n            @ticktock,\n            @tick - (@timerElapsed() - @frame*@tick)\n            )\n        @trigger(@frame)\n        # console.log \"Tick Tock!\", @timerElapsed() - @frame*@tick\n        @frame += 1\n        # if @frame > 100 then @stopTimer()\n        if @changeEvents.length then @canvas?.renderAll()\n        @changeEvents = []\n\n\nmodule.exports =\n    Clock: Clock","if typeof(window) == 'undefined'\n    _ = require \"underscore\"\nelse\n    _ = window._\n\nid_attr = \"id\"\n\ndiff = (master, update) ->\n    if not master then return update\n    ret = {}\n    for name,value of master\n        if name of update\n            if _.isObject(update[name])\n                if _.isArray(update[name])\n                    ret[name] = []\n                    for i in [0...update[name].length]\n                        array_diff = diff(master[name][i], update[name][i])\n                        if not _.isEmpty(array_diff)\n                            ret[name].push(array_diff)\n                    if ret[name].length == 0 then delete ret[name]\n                else\n                    diff = diff(master[name], update[name])\n                    if not _.isEmpty(diff)\n                        ret[name] = diff\n            else if not _.isEqual(master[name], update[name]) or\n                    name == id_attr\n                ret[name] = update[name]\n    return ret\n\nmerge = (master, update) ->\n    if not master then return update\n    for name, value of update\n        if name of master\n            if _.isObject(update[name])\n                if _.isArray(update[name])\n                    for i in [0...update[name].length]\n                        update_node = update[name][i]\n                        if _.isObject(update_node)\n                            master_node = _.find(master[name], (item) ->\n                                item.id==update_node.id)\n                            if master_node\n                                master_node = merge(master_node, update_node)\n                            else\n                                master[name].push update_node\n                        else\n                            master[name].push update_node\n                else\n                    master[name] = merge(master[name], update[name])\n            else\n                console.log name, master[name], update[name]\n                master[name] = update[name]\n        else\n            master[name] = update[name]\n    return master\n\n\nmodule.exports =\n    Diff: diff\n    Merge: merge","keys = {\n    \"backspace\" : 8\n    \"tab\" : 9\n    \"enter\" : 13\n    \"escape\" : 27\n    \"page_up\" : 33\n    \"page_down\" : 34\n    \"end\" : 35\n    \"home\" : 36\n    \"insert\" : 45\n    \"delete\" : 46\n    \"0\" : 48\n    \"1\" : 49\n    \"2\" : 50\n    \"3\" : 51\n    \"4\" : 52\n    \"5\" : 53\n    \"6\" : 54\n    \"7\" : 55\n    \"8\" : 56\n    \"9\" : 57\n    \"a\" : 65\n    \"b\" : 66\n    \"c\" : 67\n    \"d\" : 68\n    \"e\" : 69\n    \"f\" : 70\n    \"g\" : 71\n    \"h\" : 72\n    \"i\" : 73\n    \"j\" : 74\n    \"k\" : 75\n    \"l\" : 76\n    \"m\" : 77\n    \"n\" : 78\n    \"o\" : 79\n    \"p\" : 80\n    \"q\" : 81\n    \"r\" : 82\n    \"s\" : 83\n    \"t\" : 84\n    \"u\" : 85\n    \"v\" : 86\n    \"w\" : 87\n    \"x\" : 88\n    \"y\" : 89\n    \"z\" : 90\n    \"numpad0\" : 96\n    \"numpad1\" : 97\n    \"numpad2\" : 98\n    \"numpad3\" : 99\n    \"numpad4\" : 100\n    \"numpad5\" : 101\n    \"numpad6\" : 102\n    \"numpad7\" : 103\n    \"numpad8\" : 104\n    \"numpad9\" : 105\n    \"numpad*\" : 106\n    \"numpad+\" : 107\n    \"numpad-\" : 109\n    \"numpad.\" : 110\n    \"numpad/\" : 111\n    \"f1\" : 112\n    \"f2\" : 113\n    \"f3\" : 114\n    \"f4\" : 115\n    \"f5\" : 116\n    \"f6\" : 117\n    \"f7\" : 118\n    \"f8\" : 119\n    \"f9\" : 120\n    \"f10\" : 121\n    \"f11\" : 122\n    \"f12\" : 123\n    \"num_lock\" : 144\n    \"scroll_lock\" : 145\n    \";\" : 186\n    \"=\" : 187\n    \",\" : 188\n    \"-\" : 189\n    \".\" : 190\n    \"/\" : 191\n    \"[\" : 219\n    \"\\\\\" : 220\n    \"]\" : 221\n    \"'\" : 222\n}\n\nmodule.exports =\n    Keys: keys","module.exports = (folder, app) ->\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        app[module.split(\"/\").slice(-1)[0]] = require module","module.exports = (folder) ->\n    modulesExported = []\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        modulesExported.push module.split(\"/\").slice(-1)[0]\n    return modulesExported","module.exports = (folder, moduleSubKey) ->\n    subModules = {}\n    window.require.list().filter (module) ->\n        return new RegExp('^' + folder + '/').test module\n    .forEach (module) ->\n        subModules[module.split(\"/\").slice(-1)[0]] =\n            require(module)[moduleSubKey]\n        if not subModules[module.split(\"/\").slice(-1)[0]]\n            delete subModules[module.split(\"/\").slice(-1)[0]]\n    return subModules","seeded_shuffle = (source_array, seed) ->\n    random = new Math.seedrandom seed\n    array = source_array.slice 0\n    m = array.length\n\n    # While there remain elements to shuffle…\n    while m\n\n        # Pick a remaining element…\n        i = Math.floor(random() * m--)\n\n        # And swap it with the current element.\n        t = array[m]\n        array[m] = array[i]\n        array[i] = t\n\n    return array\n\nmodule.exports =\n    seeded_shuffle: seeded_shuffle","'use strict'\n\nView = require './View'\n\nmodule.exports = class BlockView extends View\n\n    initialize: (options) =>\n        super\n        @generateTrialModels()\n        @instantiateSubViews(\"trials\",\n            \"TrialView\", @trialObjectViewType)\n\n    generateTrialModels: ->\n        [trialListLength, parameterSet] = @model.returnParameters()\n        if not trialListLength\n            @model.get(\"trials\").create @model.returnTrialProperties(true)\n        else\n            for parameters in parameterSet\n                trial =\n                    @model.get(\"trials\").create @model.returnTrialProperties()\n                trial.get(\"trialObjects\").add(\n                    (model.parameterizedTrial(parameters) \\\n                    for model in @model.get(\"trialObjects\").models)\n                    )\n\n    preLoadBlock: (queue) =>\n        for key, view of @subViews\n            view.preLoadTrial(queue)\n\n    startBlock: ->\n        @datamodel.set(\"trial\", @datamodel.get(\"trial\") or 0)\n        currentTrial = @model.get(\"trials\").at(@datamodel.get(\"trial\"))\n        @showTrial currentTrial\n\n    showTrial: (trial) =>\n        if not trial\n            console.log \"Done, finito, finished!\"\n            return\n        trialView = @subViews[trial.get(\"id\")]\n        if @trialView\n            if @trialView.close then @trialView.close() else @trialView.remove()\n        @trialdatamodel =\n            @datamodel.get(\"trialdatalogs\").at(@datamodel.get(\"trial\")) or\n            @datamodel.get(\"trialdatalogs\").create()\n        @datamodel.save()\n        @trialView = trialView\n        @trialView.datamodel = @trialdatamodel\n        @trialView.render()\n        @trialView.appendTo(\"#trials\")\n        @listenToOnce @trialView, \"trialEnded\", @nextTrial\n        @trialView.startTrial()\n\n    nextTrial: ->\n        @datamodel.set(\"trial\", @datamodel.get(\"trial\") + 1)\n        currentTrial = @model.get(\"trials\").at(@datamodel.get(\"trial\"))\n        @showTrial currentTrial","'use strict'\n\nclock = require(\"utils/clock\")\nView = require './View'\nExperiment = require '../models/Experiment'\nExperimentDataHandler = require '../models/ExperimentDataHandler'\nTemplate = require 'templates/experiment'\nProgressBarView = require './ProgressBarView'\n\nmodule.exports = class ExperimentView extends View\n    template: Template\n\n    initialize: =>\n        super\n        @clock = new clock.Clock()\n        @refreshTime()\n        @render()\n        @appendTo(\"#app\")\n        @datacollection = new ExperimentDataHandler.Collection\n        @datacollection.fetch().then =>\n            @datamodel = @datacollection.getOrCreateParticipantModel(1,\n                @model.get(\"saveInterval\"))\n            @instantiateSubViews(\"blocks\", \"BlockView\")\n            @preLoadExperiment()\n\n    refreshTime: =>\n        @time = @clock.getTime()\n\n    startBlock: (block) =>\n        blockView = @subViews[block.get(\"id\")]\n        if @blockView\n            if @blockView.close then @blockView.close() else @blockView.remove()\n        @blockdatamodel = @datamodel.get(\"blockdatahandlers\").at(block) or\n            @datamodel.get(\"blockdatahandlers\").create()\n        @datamodel.save()\n        @blockView = blockView\n        @blockView.datamodel = @blockdatamodel\n        @blockView.render()\n        @blockView.startBlock()\n\n    preLoadExperiment: ->\n        queue = new createjs.LoadQueue true\n        for key, view of @subViews\n            view.preLoadBlock(queue)\n        progressBarView = new ProgressBarView\n            queue: queue\n            complete: @startExperiment\n        progressBarView.appendTo(\"#messages\")\n        progressBarView.render()\n        \n\n    startExperiment: =>\n        currentBlock = @model.get(\"blocks\").at(@datamodel.get(\"block\") or 0)\n        @startBlock currentBlock\n","'use strict'\n\ntemplate = require '../templates/home'\nView = require './View'\n\nmodule.exports = class HomeView extends View\n    id: 'home-view'\n    template: template","'use strict'\n\ntemplate = require '../templates/progressbar'\nView = require './View'\n\nmodule.exports = class ProgressBarView extends View\n    template: template\n\n    initialize: (options) =>\n        super\n        @queue = options.queue\n        @complete = options.complete\n        @queue.on \"progress\", @progress\n        @queue.on \"complete\", @finish\n\n    progress: (data) =>\n        @setProgressBar data.progress\n\n    finish: =>\n        @$el.animate(\n            opacity: 0,\n            1000,\n            \"swing\",\n            @close\n            )\n\n    close: =>\n        @complete()\n        @remove()\n\n    setProgressBar: (fraction) ->\n        progressBarWidth = fraction * @$el.find(\"#progressBar\").width()\n        @$el.find(\"#indicator\").animate(\n            width: progressBarWidth,\n            100).html(\n            Math.round(fraction * 100) + \"%&nbsp;\")","'use strict'\n\nView = require './View'\n\nmodule.exports = class TrialObjectView extends View\n\n    initialize: ->\n        super\n        if not @model.get \"file\" then @render()\n        @active = false\n        @name = @model.name()\n\n    attach: (endpoints) ->\n        return\n\n    preLoadTrialObject: (queue) =>\n        if @model.get(\"file\")\n            @object_id = @model.get(\"file\")\n            if not queue.getItem(@object_id)\n                queue.loadFile src: @object_id\n            queue.on \"fileload\", @postFileLoad\n\n    postFileLoad: (data) =>\n        if data.item.src == @model.get(\"file\")\n            @file_object = data.result\n            @render()\n\n    render: =>\n        console.debug \"Rendering #{@constructor.name}\"\n        @$el.html @file_object\n\n    logEvent: (event_type, options={}) =>\n        @datamodel.logEvent(\n            event_type\n            @clock\n            _.extend options,\n                object: @model.name()\n                details: @logDetails()\n                )\n\n    addToClockChangeEvents: (event) ->\n        @clock.changeEvents.push event\n\n    logDetails: ->\n        if PsychoCoffee.DEBUG\n            @model.attributes\n        else\n            @model.get(\"type\") or @model.get(\"subModelTypeAttribute\")\n\n    activate: ->\n        if not @active\n            @trigger \"activated\"\n            @logEvent(\"activated\")\n            @active = true\n\n    deactivate: ->\n        if @active\n            @trigger \"deactivated\"\n            @logEvent(\"deactivated\")\n            @active = false\n\n    modelSet: (attr, value) ->\n        @model.set attr, value\n\n    registerEvents: (siblingViews) =>\n        @clock.delayedTrigger @model.get(\"delay\"), @, @activate\n        @clock.delayedTrigger(\n            @model.get(\"delay\") + @model.get(\"duration\"),\n            @, @deactivate)\n        for trigger in (@model.get(\"triggers\") or [])\n            view = _.find(siblingViews, (sibling) ->\n                sibling.name == trigger.objectName\n                )\n            @listenTo view, trigger.eventName, =>\n                console.log \"Triggering\", trigger.eventName\n                @[trigger.callback](trigger.arguments or {})","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\n\nmodule.exports = class AudioTrialObjectView extends TrialObjectView\n\n    attach: (endpoints) ->\n        @appendTo endpoints.hidden\n\n    preLoadTrialObject: (queue) =>\n        queue.installPlugin createjs.Sound\n        super\n\n    activate: ->\n        @object.play()\n        super()\n\n    deactivate: ->\n        @object.stop()\n        super()\n\n    render: =>\n        @object = createjs.Sound.createInstance @object_id\n    # @object.on \"succeeded\", => console.log @clock.timerElapsed(), \"playing\"\n    # @object.on \"complete\", => console.log @clock.timerElapsed(), \"stopping\"","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\nKeys = require \"utils/keys\"\n\nmodule.exports = class KeyboardTrialObjectView extends TrialObjectView\n\n    initialize: =>\n        super\n        @keyCodeCache = _.invert(_.pick(Keys.Keys, @model.get(\"keys\")))\n\n    attach: (endpoints) ->\n        @object = $(window)\n\n    activate: =>\n        @object.keydown @keyPressed\n        super()\n\n    deactivate: ->\n        @object.unbind \"keydown\", @keyPressed\n        super()\n\n    keyPressed: (event) =>\n        if _.has(@keyCodeCache, event.keyCode)\n            @trigger \"keypress\"\n            @logEvent \"keypress\", key: @keyCodeCache[event.keyCode]\n\n    render: ->\n        return\n","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports = class ImageVisualTrialObjectView extends VisualTrialObjectView\n\n    render: ->\n        @object = new fabric.Image @file_object","'use strict'\n\nVisualTrialObjectView = require '../VisualTrialObjectView'\n\nmodule.exports = class TextVisualTrialObjectView extends VisualTrialObjectView\n\n    render: ->\n        @object = new fabric.Text @model.get \"text\"","'use strict'\n\nTrialObjectView = require '../TrialObjectView'\n\nmodule.exports = class VisualTrialObjectView extends TrialObjectView\n\n    attach: (endpoints) ->\n        @canvas = endpoints.canvas\n        @object.setVisible false\n        @canvas.add @object\n\n    activate: ->\n        @object.setVisible true\n        @addToClockChangeEvents(\"activated\")\n        super()\n\n    deactivate: ->\n        @object.setVisible false\n        @addToClockChangeEvents(\"deactivated\")\n        super()\n","'use strict'\n\nView = require './View'\nTemplate = require 'templates/trial'\n\nmodule.exports = class TrialView extends View\n    template: Template\n\n    initialize: (options) =>\n        super\n        @instantiateSubViews(\"trialObjects\",\n            \"TrialObjectView\", @trialObjectViewType)\n        @subViewList = _.values(@subViews)\n\n    preLoadTrial: (queue) =>\n        for key, view of @subViews\n            view.preLoadTrialObject(queue)\n\n    trialObjectViewType: (model) ->\n        elementType = model.get(\"subModelTypeAttribute\") or\n            PsychoCoffee.trialObjectTypeKeys[model.get(\"type\")]\n\n        # For this to work, any models subclassed from TrialObject must be named\n        # ModelName, and the associated View must be named ModelNameView\n\n        elementView = elementType + \"View\"\n\n        try\n            PsychoCoffee[elementView]\n            elementView\n        catch error\n            console.debug error, \"Unknown element type #{elementType}\"\n\n    startTrial: ->\n        @createCanvas()\n        for view in @subViewList\n            view.attach canvas: @canvas, hidden: @$(\"#trial-hidden\")\n            view.datamodel = @datamodel\n            view.registerEvents(@subViewList)\n        @registerTimeout()\n        @clock.startTimer()\n        @logEvent \"trial_start\"\n\n    createCanvas: =>\n        @canvas = new fabric.StaticCanvas \"trial-canvas\"\n        @clock.canvas = @canvas\n\n    canvasPerformanceTracking: (options) =>\n        now = options.event_time\n        @canvas.on \"after:render\", =>\n            console.log @clock.timerElapsed() - now,\n                \"ms between object added/removed and render completion\"\n            @canvas.off(\"after:render\")\n\n    logEvent: (event_type, options={}) =>\n        @datamodel.logEvent(\n            event_type\n            @clock\n            _.extend options,\n                object: @model.name()\n                )\n\n    registerTimeout: =>\n        if @model.get \"timeout\"\n            @clock.delayedTrigger @model.get(\"timeout\"), @, @endTrial\n\n    endTrial: ->\n        for key, view of @subViews\n            view.deactivate()\n            view.remove()\n        @clock.stopTimer()\n        delete @clock.canvas\n        delete @canvas\n        @stopListening()\n        @remove()\n        @trigger \"trialEnded\"","# require 'lib/view_helper'\n\n# Base class for all views.\nmodule.exports = class View extends Backbone.View\n    initialize: (options) =>\n        super\n        @clock = options.clock\n\n    template: ->\n        return\n\n    getRenderData: ->\n        return @model?.attributes or {}\n\n    render: =>\n        console.debug \"Rendering #{@constructor.name}\"\n        @$el.html @template @getRenderData()\n        @afterRender()\n        return @\n\n    appendTo: (el) =>\n        $(el).append(@el)\n\n    instantiateSubViews: (key, viewType, viewFunction) =>\n        @subViews = {}\n        for model in @model.get(key).models\n            if viewFunction then viewType = viewFunction(model)\n            @subViews[model.id] = new PsychoCoffee[viewType]\n                model: model\n                clock: @clock\n\n    afterRender: ->\n        return","'use strict';\n\nmodule.exports = 'development';\n"]}